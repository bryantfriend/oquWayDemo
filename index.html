<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OquWay Educational App</title>
    <!-- Tailwind CSS CDN for basic utility classes -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Custom styles for OquWay App */
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(to right, #a7e6f8, #f8d3a7); /* Soft gradient background */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            color: #333;
            overflow: hidden; /* Prevent scrollbars */
        }

        .container {
            background-color: #ffffff;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            width: 90vw; /* Responsive width */
            max-width: 800px; /* Max width for larger screens */
            padding: 2.5rem;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 70vh; /* Minimum height to occupy a good portion of the screen */
            position: relative;
            overflow: hidden;
            border: 5px solid #8e44ad; /* Purple border for a playful touch */
        }

        h1, h2 {
            color: #8e44ad; /* Purple heading */
            margin-bottom: 1.5rem;
            font-weight: 700;
        }

        .screen {
            width: 50%;
            height: 50%;
            display: none; /* Hidden by default, managed by JS */
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .screen.active {
            display: flex;
        }

        /* Language Switcher with Flags */
        .language-switcher {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 100;
            display: flex;
            gap: 10px;
        }
        .language-switcher img {
            width: 40px; /* Adjust flag size as needed */
            height: 30px;
            border: 2px solid #8e44ad;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            object-fit: cover;
        }
        .language-switcher img:hover {
            transform: scale(1.1);
            border-color: #6c3483;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }
        .language-switcher img.selected {
            border-color: #2ecc71; /* Highlight selected flag */
            box-shadow: 0 0 10px rgba(46, 204, 113, 0.5);
        }


        /* Login Screen Styles */
        .class-selection, .student-photo-selection {
            display: flex;
            gap: 1.5rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .class-item, .student-photo-item {
            width: 100px;
            height: 100px;
            background-color: #f0f0f0;
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
            font-size: 3rem; /* Large icon size for class items */
            color: #3498db; /* Blue for class icons */
            padding: 0.5rem;
            position: relative; /* For the selected tick */
        }
        /* Style for image within student photo items */
        .student-photo-item img {
            width: 90px;
            height: 90px;
            object-fit: cover;
            border-radius: 50%; /* Make them round */
            border: 2px solid transparent;
            transition: border-color 0.3s ease;
        }


        .class-item.selected, .student-photo-item.selected {
            border-color: #2ecc71; /* Green selected border */
            background-color: #e6f7ed;
            box-shadow: 0 0 15px rgba(46, 204, 113, 0.4);
        }
        .class-item:hover, .student-photo-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        .student-photo-item.selected img {
             border-color: #2ecc71; /* Green border on selected photo */
        }

        .class-item span {
            font-size: 0.9rem;
            color: #555;
            font-weight: 600;
        }

        .emoji-password-input {
            width: 80%;
            max-width: 300px;
            padding: 0.75rem 1rem;
            font-size: 1.5rem;
            text-align: center;
            border: 2px solid #ccc;
            border-radius: 10px;
            margin-bottom: 1.5rem;
            outline: none;
            transition: border-color 0.3s ease;
            letter-spacing: 0.5rem; /* Space out emojis */
            font-family: 'Segoe UI Emoji', 'Apple Color Emoji', 'Segoe UI Symbol', 'Noto Color Emoji', sans-serif;
        }
        .emoji-password-input:focus {
            border-color: #8e44ad;
        }

        /* Fruit Grid Styles */
        .fruit-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr); /* 3 columns */
            gap: 10px;
            margin-bottom: 2rem;
            width: 80%;
            max-width: 300px;
        }

        .fruit-button {
            background-color: #f0f0f0;
            border: 2px solid #ddd;
            border-radius: 10px;
            padding: 10px;
            font-size: 2.5rem; /* Large emoji size */
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 70px; /* Fixed height for consistent grid */
        }
        .fruit-button:hover {
            background-color: #e0e0e0;
            transform: translateY(-2px);
        }
        .fruit-button:active {
            transform: translateY(0);
            background-color: #d0d0d0;
        }


        .login-btn {
            background-color: #2ecc71; /* Green login button */
            color: white;
            padding: 0.8rem 2rem;
            border-radius: 12px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
            border: none;
            box-shadow: 0 5px 15px rgba(46, 204, 113, 0.3);
        }
        .login-btn:hover {
            background-color: #27ae60;
            transform: translateY(-3px);
        }

        /* Dashboard Screen Styles */
        .student-info {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            margin-bottom: 2rem;
            background-color: #f7f7f7;
            padding: 1.5rem 2.5rem;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            width: fit-content;
            margin-left: auto;
            margin-right: auto;
        }

        #dashboard-avatar, #store-avatar {
            width: 100px; /* Fixed width for consistency */
            height: 100px; /* Fixed height */
            object-fit: cover; /* Ensure image covers the area without distortion */
            border-radius: 50%; /* Make it round */
            border: 4px solid #8e44ad;
            padding: 0.25rem;
            background-color: #fff;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        #student-name, #store-student-name {
            font-size: 2rem;
            font-weight: bold;
            color: #34495e; /* Darker blue for name */
        }

        .intention-points {
            display: flex;
            gap: 1.5rem;
            margin-bottom: 2.5rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .point-type {
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #f0f0f0;
            padding: 1rem 1.5rem;
            border-radius: 15px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
            min-width: 120px;
            transition: transform 0.2s ease;
        }
        .point-type:hover {
            transform: translateY(-3px);
        }

        .point-type .icon {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        .point-type .label {
            font-size: 0.9rem;
            font-weight: 600;
            color: #666;
            margin-bottom: 0.25rem;
        }

        .point-type .value {
            font-size: 2rem;
            font-weight: bold;
        }

        /* Specific point colors */
        .point-physical .icon, .point-physical .value { color: #2ecc71; } /* Green */
        .point-cognitive .icon, .point-cognitive .value { color: #3498db; } /* Blue */
        .point-creative .icon, .point-creative .value { color: #e67e22; } /* Orange */
        .point-social .icon, .point-social .value { color: #8e44ad; } /* Purple */

        .dashboard-buttons {
            display: flex;
            flex-direction: column;
            gap: 1.2rem;
            width: 80%;
            max-width: 400px;
        }

        .dashboard-btn {
            background-color: #3498db; /* Blue */
            color: white;
            padding: 0.9rem 1.5rem;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
            border: none;
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }
        .dashboard-btn:hover {
            background-color: #2980b9;
            transform: translateY(-3px);
        }
        .dashboard-btn.activity { background-color: #2ecc71; box-shadow: 0 5px 15px rgba(46, 204, 113, 0.3); }
        .dashboard-btn.activity:hover { background-color: #27ae60; }
        .dashboard-btn.log-physical { background-color: #f1c40f; color: #333; box-shadow: 0 5px 15px rgba(241, 196, 15, 0.3); } /* Yellow */
        .dashboard-btn.log-physical:hover { background-color: #f39c12; }
        .dashboard-btn.learning-activities { background-color: #8e44ad; box-shadow: 0 5px 15px rgba(142, 68, 173, 0.3); }
        .dashboard-btn.learning-activities:hover { background-color: #6c3483; }

        /* Store Screen Styles */
        .store-items, .activity-items-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); /* Responsive grid */
            gap: 1.5rem;
            width: 100%;
            margin-bottom: 2rem;
            max-width: 600px;
            justify-content: center;
        }

        .store-item, .activity-card {
            background-color: #f8f8f8;
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            display: flex;
            flex-direction: column;
            align-items: center;
            border: 2px solid #ddd;
            transition: all 0.3s ease;
        }
        .store-item:hover, .activity-card:hover {
            transform: translateY(-5px);
            border-color: #8e44ad;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }

        .item-icon, .subject-icon {
            font-size: 3.5rem;
            margin-bottom: 1rem;
        }

        .item-name, .activity-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: #34495e;
            margin-bottom: 0.75rem;
        }

        .activity-description {
            font-size: 0.95rem;
            color: #666;
            margin-bottom: 1.2rem;
            height: 3em; /* Fixed height for consistent card size */
            overflow: hidden; /* Hide overflow if description is too long */
            text-overflow: ellipsis; /* Add ellipsis for overflow */
            display: -webkit-box;
            -webkit-line-clamp: 2; /* Limit to 2 lines */
            -webkit-box-orient: vertical;
        }

        .item-cost {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 1.2rem;
            flex-wrap: wrap; /* Allow wrapping for costs */
            justify-content: center;
        }

        .cost-point {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            font-weight: 600;
            font-size: 1.1rem;
        }
        .cost-point .icon {
            font-size: 1.5rem;
        }

        .buy-btn, .start-activity-btn, .check-code-btn {
            background-color: #e67e22; /* Orange buy button */
            color: white;
            padding: 0.7rem 1.5rem;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
            border: none;
            box-shadow: 0 4px 12px rgba(230, 126, 34, 0.3);
        }
        .buy-btn:hover:not(:disabled), .start-activity-btn:hover:not(:disabled), .check-code-btn:hover:not(:disabled) {
            background-color: #d35400;
            transform: translateY(-2px);
        }
        .buy-btn:disabled, .start-activity-btn:disabled, .check-code-btn:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
            box-shadow: none;
        }

        .back-btn {
            background-color: #95a5a6; /* Gray back button */
            color: white;
            padding: 0.6rem 1.2rem;
            border-radius: 10px;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.3s ease;
            border: none;
            box-shadow: 0 3px 10px rgba(149, 165, 166, 0.3);
        }
        .back-btn:hover {
            background-color: #7f8c8d;
        }

        /* Math Puzzle Screen specific styles */
        .math-puzzle-container,
        .reading-time-container,
        .creative-writing-container,
        .science-experiment-container,
        .memory-challenge-container,
        .time-travel-quiz-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1.5rem;
            margin-top: 2rem;
            padding: 2rem;
            background-color: #f0f8ff; /* Light blue background for math */
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            width: 80%;
            max-width: 500px;
            border: 3px solid #3498db; /* Blue border */
            text-align: left; /* Align text within activity containers */
        }
        .math-puzzle-container .math-pattern {
            text-align: center;
            width: 100%;
        }

        .math-puzzle-container p,
        .reading-time-container p,
        .creative-writing-container p,
        .science-experiment-container p,
        .memory-challenge-container p,
        .time-travel-quiz-container p {
            font-size: 1.2rem;
            color: #555;
            width: 100%; /* Ensure paragraphs take full width */
        }

        .math-pattern {
            font-size: 2.5rem;
            font-weight: bold;
            color: #34495e;
            margin-bottom: 1rem;
        }

        .code-input,
        .writing-textarea,
        .observation-textarea {
            width: 100%;
            padding: 0.75rem;
            font-size: 1.2rem;
            text-align: center;
            border: 2px solid #ccc;
            border-radius: 10px;
            outline: none;
            transition: border-color 0.3s ease;
            letter-spacing: 0.1rem;
            min-height: 100px; /* For text areas */
            resize: vertical; /* Allow vertical resizing for text areas */
        }
        .code-input {
             width: 150px; /* Specific width for code input */
             font-size: 1.8rem;
             letter-spacing: 0.2rem;
        }

        .code-input:focus,
        .writing-textarea:focus,
        .observation-textarea:focus {
            border-color: #3498db;
        }

        /* Radio button styles for quiz/reading comprehension */
        .quiz-options, .reading-options {
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
            width: 100%;
            margin-bottom: 1.5rem;
        }
        .quiz-option, .reading-option {
            background-color: #eaf6ff;
            border: 2px solid #a7d9f7;
            border-radius: 10px;
            padding: 0.8rem 1.2rem;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: left;
            display: flex;
            align-items: center;
        }
        .quiz-option:hover, .reading-option:hover {
            background-color: #d1ecfd;
            transform: translateY(-2px);
        }
        .quiz-option input[type="radio"], .reading-option input[type="radio"] {
            margin-right: 10px;
            transform: scale(1.3); /* Make radio buttons larger */
        }
        .quiz-option.selected, .reading-option.selected {
            background-color: #c9e6ff;
            border-color: #3498db;
            box-shadow: 0 0 10px rgba(52, 152, 219, 0.3);
        }

        /* Message box styles */
        .message-box {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 20px 30px;
            border-radius: 15px;
            z-index: 1000;
            font-size: 1.2rem;
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.4);
            display: none; /* Hidden by default */
        }
        .message-box.active {
            display: block;
        }

        /* Random Words for Creative Writing */
        .random-words {
            font-size: 1.3rem;
            font-weight: 600;
            color: #e67e22; /* Orange color for creative elements */
            margin-bottom: 1rem;
            text-align: center;
            width: 100%;
        }

        /* Memory Challenge styles */
        .fact-display {
            font-size: 1.5rem;
            font-weight: bold;
            color: #34495e;
            margin-bottom: 1.5rem;
            text-align: center;
            width: 100%;
        }
        .memory-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            width: 100%;
        }
        .memory-option-btn {
            background-color: #f0f0f0;
            border: 2px solid #ddd;
            border-radius: 10px;
            padding: 0.8rem 1.2rem;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .memory-option-btn:hover {
            background-color: #e0e0e0;
            transform: translateY(-2px);
        }
        .memory-option-btn.correct {
            background-color: #d4edda; /* Light green */
            border-color: #28a745; /* Darker green */
        }
        .memory-option-btn.incorrect {
            background-color: #f8d7da; /* Light red */
            border-color: #dc3545; /* Darker red */
        }
        .memory-option-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
        }


        /* Responsive adjustments */
        @media (max-width: 768px) {
            .container {
                padding: 1.5rem;
                min-height: 90vh;
            }
            h1 {
                font-size: 2rem;
                margin-bottom: 1rem;
            }
            h2 {
                font-size: 1.5rem;
                margin-bottom: 1rem;
            }
            .class-item, .student-photo-item {
                width: 80px;
                height: 80px;
                font-size: 2.5rem;
            }
            .student-photo-item img {
                width: 70px;
                height: 70px;
            }
            .emoji-password-input {
                font-size: 1.2rem;
                padding: 0.6rem 0.8rem;
                width: 90%;
            }
            .login-btn, .dashboard-btn, .buy-btn, .back-btn, .start-activity-btn, .check-code-btn {
                padding: 0.7rem 1.5rem;
                font-size: 1rem;
            }
            #dashboard-avatar, #store-avatar {
                width: 80px;
                height: 80px;
            }
            #student-name, #store-student-name {
                font-size: 1.5rem;
            }
            .point-type {
                min-width: 100px;
                padding: 0.8rem 1rem;
            }
            .point-type .icon {
                font-size: 2rem;
            }
            .point-type .value {
                font-size: 1.5rem;
            }
            .dashboard-buttons {
                width: 100%;
            }
            .store-item, .activity-card {
                padding: 1rem;
            }
            .item-icon, .subject-icon {
                font-size: 3rem;
            }
            .item-name, .activity-title {
                font-size: 1.1rem;
            }
            .cost-point {
                font-size: 0.9rem;
            }
            .cost-point .icon {
                font-size: 1.2rem;
            }
            .activity-description {
                font-size: 0.85rem;
                height: 3.2em; /* Adjusted height for smaller text */
            }
            .math-puzzle-container,
            .reading-time-container,
            .creative-writing-container,
            .science-experiment-container,
            .memory-challenge-container,
            .time-travel-quiz-container {
                padding: 1.5rem;
                width: 90%;
            }
            .math-pattern {
                font-size: 2rem;
            }
            .code-input {
                font-size: 1.5rem;
                width: 120px;
            }
            .reading-time-container p, .creative-writing-container p, .science-experiment-container p, .memory-challenge-container p, .time-travel-quiz-container p {
                font-size: 1rem;
            }
            .writing-textarea, .observation-textarea {
                font-size: 1rem;
            }
            .quiz-option, .reading-option {
                font-size: 0.9rem;
                padding: 0.6rem 1rem;
            }
            .random-words {
                font-size: 1.1rem;
            }
            .fact-display {
                font-size: 1.2rem;
            }
            .memory-option-btn {
                font-size: 1rem;
            }
             .language-switcher {
                top: 10px;
                right: 10px;
            }
            .language-switcher img {
                width: 30px;
                height: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Language Switcher with Flags -->
        <div class="language-switcher" id="languageSwitcher">
            <img src="https://flagcdn.com/us.svg" alt="English Flag" data-lang="en" class="selected">
            <img src="https://flagcdn.com/ru.svg" alt="Russian Flag" data-lang="ru">
            <img src="https://flagcdn.com/kg.svg" alt="Kyrgyz Flag" data-lang="kg">
        </div>

        <!-- Message Box -->
        <div id="messageBox" class="message-box"></div>

        <!-- Login Screen -->
        <div id="loginScreen" class="screen active">
            <h1 class="text-4xl" data-i18n="welcomeTitle"></h1>
            <h2 class="text-2xl mb-6" data-i18n="chooseClass"></h2>
            <div class="class-selection" id="classSelection">
                <div class="class-item" data-class="Horse">
                    üê¥
                    <span data-i18n="horseClass"></span>
                </div>
                <div class="class-item" data-class="Falcon">
                    ü¶Ö
                    <span data-i18n="falconClass"></span>
                </div>
                <div class="class-item" data-class="Snow Leopard">
                    üêÜ
                    <span data-i18n="snowLeopardClass"></span>
                </div>
            </div>

            <h2 class="text-2xl mb-6" data-i18n="pickPhoto"></h2>
            <div class="student-photo-selection" id="studentPhotoSelection">
                <p data-i18n="selectClassPrompt"></p>
            </div>

            <h2 class="text-2xl mb-6" data-i18n="enterPassword"></h2>
            <input type="text" id="emojiPasswordInput" class="emoji-password-input" placeholder="" maxlength="4" readonly>
            <div class="fruit-grid" id="fruitGrid">
                <!-- Fruit buttons will be dynamically loaded here by JS -->
            </div>
            <button id="loginBtn" class="login-btn" data-i18n="loginBtn"></button>
        </div>

        <!-- Dashboard Screen -->
        <div id="dashboardScreen" class="screen">
            <h1 class="text-4xl mb-8" data-i18n="dashboardTitle"></h1>
            <div class="student-info">
                <img id="dashboard-avatar" src="" alt="Student Avatar">
                <span id="student-name"></span>
            </div>

            <h2 class="text-2xl mb-6" data-i18n="intentionPointsTitle"></h2>
            <div class="intention-points">
                <div class="point-type point-physical">
                    <span class="icon">üí™</span>
                    <span class="label" data-i18n="physicalPoints"></span>
                    <span class="value" id="physicalPoints">0</span>
                </div>
                <div class="point-type point-cognitive">
                    <span class="icon">üß†</span>
                    <span class="label" data-i18n="cognitivePoints"></span>
                    <span class="value" id="cognitivePoints">0</span>
                </div>
                <div class="point-type point-creative">
                    <span class="icon">üé®</span>
                    <span class="label" data-i18n="creativePoints"></span>
                    <span class="value" id="creativePoints">0</span>
                </div>
                <div class="point-type point-social">
                    <span class="icon">ü§ù</span>
                    <span class="label" data-i18n="socialPoints"></span>
                    <span class="value" id="socialPoints">0</span>
                </div>
            </div>

            <div class="dashboard-buttons">
                <button id="earnQuickPointsBtn" class="dashboard-btn activity" data-i18n="earnQuickPointsBtn"></button>
                <button id="goToActivitiesBtn" class="dashboard-btn learning-activities" data-i18n="goToActivitiesBtn"></button>
                <button id="logPhysicalActivityBtn" class="dashboard-btn log-physical" data-i18n="logPhysicalActivityBtn"></button>
                <button id="visitStoreBtn" class="dashboard-btn" data-i18n="visitStoreBtn"></button>
            </div>
        </div>

        <!-- Intention Store Page -->
        <div id="storeScreen" class="screen">
            <h1 class="text-4xl mb-8" data-i18n="storeTitle"></h1>
            <div class="student-info mb-6">
                <img id="store-avatar" src="" alt="Student Avatar">
                <span id="store-student-name"></span>
                <div class="intention-points-small ml-4">
                    <div class="point-type point-physical">
                        <span class="icon">üí™</span>
                        <span class="value" id="storePhysicalPoints">0</span>
                    </div>
                    <div class="point-type point-cognitive">
                        <span class="icon">üß†</span>
                        <span class="value" id="storeCognitivePoints">0</span>
                    </div>
                    <div class="point-type point-creative">
                        <span class="icon">üé®</span>
                        <span class="value" id="storeCreativePoints">0</span>
                    </div>
                    <div class="point-type point-social">
                        <span class="icon">ü§ù</span>
                        <span class="value" id="storeSocialPoints">0</span>
                    </div>
                </div>
            </div>

            <div class="store-items" id="storeItemsContainer">
                <!-- Items will be dynamically loaded here by JS -->
            </div>
            <button id="backToDashboardBtn" class="back-btn" data-i18n="backToDashboardBtn"></button>
        </div>

        <!-- Activity Screen -->
        <div id="activityScreen" class="screen">
            <h1 class="text-4xl mb-8" data-i18n="activitiesTitle"></h1>
            <div class="activity-items-container" id="activityItemsContainer">
                <!-- Activities will be dynamically loaded here by JS -->
            </div>
            <button id="backFromActivitiesBtn" class="back-btn" data-i18n="backToDashboardBtn"></button>
        </div>

        <!-- Math Puzzle Screen -->
        <div id="mathPuzzleScreen" class="screen">
            <h1 class="text-4xl mb-8" data-i18n="mathPuzzleTitle"></h1>
            <div class="math-puzzle-container">
                <p data-i18n="mathPuzzlePrompt"></p>
                <div class="math-pattern">10, 20, 30, _ _ _</div>
                <label for="mathCodeInput" class="text-xl font-semibold mt-4" data-i18n="enterCodePrompt"></label>
                <input type="number" id="mathCodeInput" class="code-input" placeholder="" maxlength="3">
                <button id="checkMathCodeBtn" class="check-code-btn mt-4" data-i18n="checkCodeBtn"></button>
            </div>
            <button id="backFromMathPuzzleBtn" class="back-btn mt-8" data-i18n="backToActivitiesBtn"></button>
        </div>

        <!-- Reading Time Screen -->
        <div id="readingTimeScreen" class="screen">
            <h1 class="text-4xl mb-8" data-i18n="readingTimeTitle"></h1>
            <div class="reading-time-container">
                <p class="text-lg font-bold mb-4" data-i18n="squeakyStoryTitle"></p>
                <p class="mb-6" data-i18n="squeakyStoryContent"></p>
                <p class="font-semibold mb-4" data-i18n="squeakyQuestion"></p>
                <div class="reading-options" id="readingOptions">
                    <label class="reading-option">
                        <input type="radio" name="readingAnswer" value="apples"> <span data-i18n="applesOption"></span>
                    </label>
                    <label class="reading-option">
                        <input type="radio" name="readingAnswer" value="nuts"> <span data-i18n="nutsOption"></span>
                    </label>
                    <label class="reading-option">
                        <input type="radio" name="readingAnswer" value="playing"> <span data-i18n="playingOption"></span>
                    </label>
                </div>
                <button id="checkReadingAnswerBtn" class="check-code-btn mt-4" data-i18n="checkAnswerBtn"></button>
            </div>
            <button id="backFromReadingTimeBtn" class="back-btn mt-8" data-i18n="backToActivitiesBtn"></button>
        </div>

        <!-- Creative Writing Screen -->
        <div id="creativeWritingScreen" class="screen">
            <h1 class="text-4xl mb-8" data-i18n="creativeWritingTitle"></h1>
            <div class="creative-writing-container">
                <p class="mb-4" data-i18n="creativeWritingPrompt"></p>
                <p class="random-words" id="randomWordsDisplay"></p>
                <textarea id="creativeWritingTextarea" class="writing-textarea" placeholder=""></textarea>
                <button id="finishWritingBtn" class="check-code-btn mt-4" data-i18n="finishWritingBtn"></button>
            </div>
            <button id="backFromCreativeWritingBtn" class="back-btn mt-8" data-i18n="backToActivitiesBtn"></button>
        </div>

        <!-- Science Experiment Screen -->
        <div id="scienceExperimentScreen" class="screen">
            <h1 class="text-4xl mb-8" data-i18n="scienceExperimentTitle"></h1>
            <div class="science-experiment-container">
                <p class="mb-4 font-bold" data-i18n="scienceExperimentName"></p>
                <p class="mb-6" data-i18n="scienceExperimentDesc"></p>
                <label for="observationTextarea" class="text-xl font-semibold mt-4" data-i18n="yourObservation"></label>
                <textarea id="observationTextarea" class="observation-textarea" placeholder=""></textarea>
                <button id="submitObservationBtn" class="check-code-btn mt-4" data-i18n="submitObservationBtn"></button>
            </div>
            <button id="backFromScienceExperimentBtn" class="back-btn mt-8" data-i18n="backToActivitiesBtn"></button>
        </div>

        <!-- Memory Challenge Screen -->
        <div id="memoryChallengeScreen" class="screen">
            <h1 class="text-4xl mb-8" data-i18n="memoryChallengeTitle"></h1>
            <div class="memory-challenge-container">
                <p class="font-semibold mb-4" data-i18n="memoryFactPrompt"></p>
                <p class="fact-display" id="memoryFactDisplay"></p>
                <div class="memory-options" id="memoryOptionsContainer">
                    <!-- Options generated by JS -->
                </div>
                <button id="nextMemoryChallengeBtn" class="check-code-btn mt-4" data-i18n="nextChallengeBtn"></button>
            </div>
            <button id="backFromMemoryChallengeBtn" class="back-btn mt-8" data-i18n="backToActivitiesBtn"></button>
        </div>

        <!-- Time Travel Quiz Screen -->
        <div id="timeTravelQuizScreen" class="screen">
            <h1 class="text-4xl mb-8" data-i18n="timeTravelQuizTitle"></h1>
            <div class="time-travel-quiz-container">
                <p class="font-semibold mb-4" id="quizQuestionNumber"></p>
                <p class="text-lg mb-6" id="quizQuestionText"></p>
                <div class="quiz-options" id="quizOptionsContainer">
                    <!-- Options generated by JS -->
                </div>
                <button id="nextQuizQuestionBtn" class="check-code-btn mt-4" data-i18n="nextQuestionBtn"></button>
                <button id="finishQuizBtn" class="check-code-btn mt-4" style="display:none;" data-i18n="finishQuizBtn"></button>
            </div>
            <button id="backFromTimeTravelQuizBtn" class="back-btn mt-8" data-i18n="backToActivitiesBtn"></button>
        </div>

    </div>

    <script>
        // Define global state for the student
        let studentData = {
            name: "Student",
            selectedClass: null,
            avatar: null,
            points: {
                physical: 50,
                cognitive: 50,
                creative: 50,
                social: 50
            },
            currentLang: 'en' // Default language
        };

        // --- DOM Elements ---
        const languageSwitcher = document.getElementById('languageSwitcher'); // New

        const loginScreen = document.getElementById('loginScreen');
        const dashboardScreen = document.getElementById('dashboardScreen');
        const storeScreen = document.getElementById('storeScreen');
        const activityScreen = document.getElementById('activityScreen');
        const mathPuzzleScreen = document.getElementById('mathPuzzleScreen');
        const readingTimeScreen = document.getElementById('readingTimeScreen');
        const creativeWritingScreen = document.getElementById('creativeWritingScreen');
        const scienceExperimentScreen = document.getElementById('scienceExperimentScreen');
        const memoryChallengeScreen = document.getElementById('memoryChallengeScreen');
        const timeTravelQuizScreen = document.getElementById('timeTravelQuizScreen');


        // Login Screen Elements
        const classSelection = document.getElementById('classSelection');
        const studentPhotoSelection = document.getElementById('studentPhotoSelection');
        const emojiPasswordInput = document.getElementById('emojiPasswordInput');
        const fruitGrid = document.getElementById('fruitGrid');
        const loginBtn = document.getElementById('loginBtn');

        // Dashboard Screen Elements
        const dashboardAvatar = document.getElementById('dashboard-avatar');
        const studentNameDisplay = document.getElementById('student-name');
        const physicalPointsDisplay = document.getElementById('physicalPoints');
        const cognitivePointsDisplay = document.getElementById('cognitivePoints');
        const creativePointsDisplay = document.getElementById('creativePoints');
        const socialPointsDisplay = document.getElementById('socialPoints');
        const earnQuickPointsBtn = document.getElementById('earnQuickPointsBtn');
        const goToActivitiesBtn = document.getElementById('goToActivitiesBtn');
        const logPhysicalActivityBtn = document.getElementById('logPhysicalActivityBtn');
        const visitStoreBtn = document.getElementById('visitStoreBtn');

        // Store Screen Elements
        const storeAvatar = document.getElementById('store-avatar');
        const storeStudentName = document.getElementById('store-student-name');
        const storePhysicalPointsDisplay = document.getElementById('storePhysicalPoints');
        const storeCognitivePointsDisplay = document.getElementById('storeCognitivePoints');
        const storeCreativePointsDisplay = document.getElementById('storeCreativePoints');
        const storeSocialPointsDisplay = document.getElementById('storeSocialPoints');
        const storeItemsContainer = document.getElementById('storeItemsContainer');
        const backToDashboardBtn = document.getElementById('backToDashboardBtn');

        // Activity Screen Elements
        const activityItemsContainer = document.getElementById('activityItemsContainer');
        const backFromActivitiesBtn = document.getElementById('backFromActivitiesBtn');

        // Math Puzzle Screen Elements
        const mathCodeInput = document.getElementById('mathCodeInput');
        const checkMathCodeBtn = document.getElementById('checkMathCodeBtn');
        const backFromMathPuzzleBtn = document.getElementById('backFromMathPuzzleBtn');

        // Reading Time Screen Elements
        const readingOptions = document.getElementById('readingOptions');
        const checkReadingAnswerBtn = document.getElementById('checkReadingAnswerBtn');
        const backFromReadingTimeBtn = document.getElementById('backFromReadingTimeBtn');

        // Creative Writing Screen Elements
        const randomWordsDisplay = document.getElementById('randomWordsDisplay');
        const creativeWritingTextarea = document.getElementById('creativeWritingTextarea');
        const finishWritingBtn = document.getElementById('finishWritingBtn');
        const backFromCreativeWritingBtn = document.getElementById('backFromCreativeWritingBtn');

        // Science Experiment Screen Elements
        const observationTextarea = document.getElementById('observationTextarea');
        const submitObservationBtn = document.getElementById('submitObservationBtn');
        const backFromScienceExperimentBtn = document.getElementById('backFromScienceExperimentBtn');

        // Memory Challenge Screen Elements
        const memoryFactDisplay = document.getElementById('memoryFactDisplay');
        const memoryOptionsContainer = document.getElementById('memoryOptionsContainer');
        const nextMemoryChallengeBtn = document.getElementById('nextMemoryChallengeBtn');
        const backFromMemoryChallengeBtn = document.getElementById('backFromMemoryChallengeBtn');

        // Time Travel Quiz Screen Elements
        const quizQuestionNumber = document.getElementById('quizQuestionNumber');
        const quizQuestionText = document.getElementById('quizQuestionText');
        const quizOptionsContainer = document.getElementById('quizOptionsContainer');
        const nextQuizQuestionBtn = document.getElementById('nextQuizQuestionBtn');
        const finishQuizBtn = document.getElementById('finishQuizBtn');
        const backFromTimeTravelQuizBtn = document.getElementById('backFromTimeTravelQuizBtn');


        // Message Box Element
        const messageBox = document.getElementById('messageBox');

        // --- Configuration Data (TRANSLATIONS) ---
        const translations = {
            en: {
                welcomeTitle: "Welcome to OquWay!",
                chooseClass: "Choose Your Class:",
                horseClass: "Horse Class",
                falconClass: "Falcon Class",
                snowLeopardClass: "Snow Leopard Class",
                pickPhoto: "Pick Your Photo:",
                selectClassPrompt: "Please select your class first to see available photos.",
                enterPassword: "Enter Your 4-Fruit Emoji Password:",
                loginBtn: "Login",
                studentDefaultName: "Student", // Added default student name translation

                dashboardTitle: "My OquWay Dashboard",
                intentionPointsTitle: "My Intention Points:",
                physicalPoints: "Physical",
                cognitivePoints: "Cognitive",
                creativePoints: "Creative",
                socialPoints: "Social",
                earnQuickPointsBtn: "Earn Quick Points",
                goToActivitiesBtn: "Go to Learning Activities",
                logPhysicalActivityBtn: "Log Physical Activity",
                visitStoreBtn: "Visit Store",

                storeTitle: "OquWay Intention Store",
                buyBtn: "Buy",
                backToDashboardBtn: "Back to Dashboard",

                activitiesTitle: "Learning Activities",
                backToActivitiesBtn: "Back to Activities",
                startActivityBtn: "Start",

                // Store Items
                notebook: "Notebook",
                soccerBall: "Soccer Ball",
                healthySnack: "Healthy Snack",
                paintSet: "Paint Set",
                boardGame: "Board Game",

                // Math Puzzle
                mathPuzzleTitle: "Math Puzzle!",
                mathPuzzlePrompt: "Complete the pattern to unlock the secret code:",
                enterCodePrompt: "Enter the 3-digit code:",
                checkCodeBtn: "Check Code",
                mathCorrect: "Correct! You earned 10 cognitive points!",
                mathIncorrect: "Incorrect. Try again!",
                mathCodePlaceholder: "e.g. 123", // Placeholder for math code input

                // Reading Time
                readingTimeTitle: "üìñ Reading Time",
                squeakyStoryTitle: "The Little Squirrel's Big Adventure",
                squeakyStoryContent: "Once upon a time, in a cozy oak tree, lived a tiny squirrel named Squeaky. Squeaky loved nuts more than anything! One crisp autumn morning, he spotted the biggest, shiniest acorn he had ever seen, just across a babbling brook. He knew it would be a challenge to get it, but Squeaky was a brave squirrel. He scampered down his tree, planning his route carefully. \"This will be my greatest treasure!\" he chattered.",
                squeakyQuestion: "Question: What did Squeaky love more than anything?",
                applesOption: "Apples",
                nutsOption: "Nuts",
                playingOption: "Playing",
                checkAnswerBtn: "Check Answer",
                readingCorrect: "Correct! You earned 10 cognitive points!",
                readingIncorrect: "Incorrect. Keep trying!",
                readingNoSelection: "Please select an answer!",

                // Creative Writing
                creativeWritingTitle: "‚úçÔ∏è Creative Writing",
                creativeWritingPrompt: "Write a short story (at least 3 sentences) using these 5 words:",
                finishWritingBtn: "Finish Writing",
                writingTooShort: "Please write a bit more to complete your story!",
                writingSuccess: "Wonderful story! You earned 15 creative points!",
                creativeWritingPlaceholder: "Start your amazing story here...",

                // Science Experiment
                scienceExperimentTitle: "üî¨ Science Experiment",
                scienceExperimentName: "Experiment: Baking Soda & Vinegar Volcano! üåã",
                scienceExperimentDesc: "Imagine you have a small bottle. You add two spoonfuls of baking soda inside. Then, you slowly pour in some vinegar. What do you think will happen?",
                yourObservation: "Your Observation:",
                submitObservationBtn: "Submit Observation",
                observationTooShort: "Please write a bit more about your observation!",
                observationSuccess: "Excellent observation! You earned 10 cognitive points!",
                observationPlaceholder: "Describe what you think happens...",

                // Memory Challenge
                memoryChallengeTitle: "üß† Memory Challenge",
                memoryFactPrompt: "Match the historical fact to the famous person:",
                nextChallengeBtn: "Next Challenge",
                memoryCorrect: "Correct!",
                memoryIncorrect: "Incorrect, but keep learning!",
                memoryAllDone: "You've completed all memory challenges! You earned 20 cognitive points!",

                // Time Travel Quiz
                timeTravelQuizTitle: "üó∫Ô∏è Time Travel Quiz",
                nextQuestionBtn: "Next Question",
                finishQuizBtn: "Finish Quiz",
                quizNoSelection: "Please select an answer!",
                quizCorrect: "Correct!",
                quizIncorrect: (answer) => `Incorrect. The answer was ${answer}.`,
                quizComplete: (score, total) => `Quiz complete! You scored ${score} out of ${total}! You earned ${score * 5} cognitive points!`,
                quizQuestionOf: (current, total) => `Question ${current} of ${total}`,


                // General Messages
                loginSuccess: "Login successful! Welcome to your dashboard!",
                loginSelectClass: "Please select your class!",
                loginSelectPhoto: "Please select your photo!",
                loginEnterPassword: "Please enter 4 fruits for your password!",
                pointsEarned: (points, type) => `You earned ${points} ${type} points!`,
                physicalActivityLogged: (points) => `You logged physical activity and earned ${points} physical points!`,
                purchaseSuccess: (itemName) => `You purchased the ${itemName}!`,
                notEnoughPoints: (itemName) => `Not enough points for ${itemName}!`,
                startingActivity: (title) => `Starting activity: ${title}`,
                fruitPasswordPlaceholder: "Enter 4 fruits", // Placeholder for fruit password input
            },
            ru: {
                welcomeTitle: "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ OquWay!",
                chooseClass: "–í—ã–±–µ—Ä–∏—Ç–µ —Å–≤–æ–π –∫–ª–∞—Å—Å:",
                horseClass: "–ö–ª–∞—Å—Å –õ–æ—à–∞–¥–∏",
                falconClass: "–ö–ª–∞—Å—Å –°–æ–∫–æ–ª–∞",
                snowLeopardClass: "–ö–ª–∞—Å—Å –°–Ω–µ–∂–Ω–æ–≥–æ –ë–∞—Ä—Å–∞",
                pickPhoto: "–í—ã–±–µ—Ä–∏—Ç–µ —Å–≤–æ—é —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é:",
                selectClassPrompt: "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ —Å–≤–æ–π –∫–ª–∞—Å—Å, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏.",
                enterPassword: "–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –∏–∑ 4 —Ñ—Ä—É–∫—Ç–æ–≤:",
                loginBtn: "–í–æ–π—Ç–∏",
                studentDefaultName: "–£—á–µ–Ω–∏–∫",

                dashboardTitle: "–ú–æ—è –ø–∞–Ω–µ–ª—å OquWay",
                intentionPointsTitle: "–ú–æ–∏ –±–∞–ª–ª—ã –Ω–∞–º–µ—Ä–µ–Ω–∏—è:",
                physicalPoints: "–§–∏–∑–∏—á–µ—Å–∫–∏–µ",
                cognitivePoints: "–ö–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã–µ",
                creativePoints: "–¢–≤–æ—Ä—á–µ—Å–∫–∏–µ",
                socialPoints: "–°–æ—Ü–∏–∞–ª—å–Ω—ã–µ",
                earnQuickPointsBtn: "–ù–∞–±—Ä–∞—Ç—å –±—ã—Å—Ç—Ä—ã–µ –±–∞–ª–ª—ã",
                goToActivitiesBtn: "–ü–µ—Ä–µ–π—Ç–∏ –∫ –∑–∞–Ω—è—Ç–∏—è–º",
                logPhysicalActivityBtn: "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ–∏–∑. –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å",
                visitStoreBtn: "–ü–æ—Å–µ—Ç–∏—Ç—å –º–∞–≥–∞–∑–∏–Ω",

                storeTitle: "–ú–∞–≥–∞–∑–∏–Ω –Ω–∞–º–µ—Ä–µ–Ω–∏—è OquWay",
                buyBtn: "–ö—É–ø–∏—Ç—å",
                backToDashboardBtn: "–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –ø–∞–Ω–µ–ª—å",

                activitiesTitle: "–£—á–µ–±–Ω—ã–µ –∑–∞–Ω—è—Ç–∏—è",
                backToActivitiesBtn: "–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –∑–∞–Ω—è—Ç–∏—è–º",
                startActivityBtn: "–ù–∞—á–∞—Ç—å",

                // Store Items
                notebook: "–¢–µ—Ç—Ä–∞–¥—å",
                soccerBall: "–§—É—Ç–±–æ–ª—å–Ω—ã–π –º—è—á",
                healthySnack: "–ó–¥–æ—Ä–æ–≤—ã–π –ø–µ—Ä–µ–∫—É—Å",
                paintSet: "–ù–∞–±–æ—Ä –¥–ª—è —Ä–∏—Å–æ–≤–∞–Ω–∏—è",
                boardGame: "–ù–∞—Å—Ç–æ–ª—å–Ω–∞—è –∏–≥—Ä–∞",

                // Math Puzzle
                mathPuzzleTitle: "–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–æ–ª–æ–≤–æ–ª–æ–º–∫–∞!",
                mathPuzzlePrompt: "–ó–∞–≤–µ—Ä—à–∏—Ç–µ —à–∞–±–ª–æ–Ω, —á—Ç–æ–±—ã —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–¥:",
                enterCodePrompt: "–í–≤–µ–¥–∏—Ç–µ 3-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥:",
                checkCodeBtn: "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–¥",
                mathCorrect: "–í–µ—Ä–Ω–æ! –í—ã –ø–æ–ª—É—á–∏–ª–∏ 10 –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã—Ö –±–∞–ª–ª–æ–≤!",
                mathIncorrect: "–ù–µ–≤–µ—Ä–Ω–æ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞!",
                mathCodePlaceholder: "–Ω–∞–ø—Ä. 123",

                // Reading Time
                readingTimeTitle: "üìñ –í—Ä–µ–º—è —á—Ç–µ–Ω–∏—è",
                squeakyStoryTitle: "–ë–æ–ª—å—à–æ–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ –º–∞–ª–µ–Ω—å–∫–æ–π –±–µ–ª–∫–∏",
                squeakyStoryContent: "–î–∞–≤–Ω—ã–º-–¥–∞–≤–Ω–æ, –Ω–∞ —É—é—Ç–Ω–æ–º –¥—É–±–µ, –∂–∏–ª–∞ –∫—Ä–æ—à–µ—á–Ω–∞—è –±–µ–ª–∫–∞ –ø–æ –∏–º–µ–Ω–∏ –°–∫–≤–∏–∫–∏. –°–∫–≤–∏–∫–∏ –ª—é–±–∏–ª –æ—Ä–µ—Ö–∏ –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –Ω–∞ —Å–≤–µ—Ç–µ! –û–¥–Ω–∏–º —Å–≤–µ–∂–∏–º –æ—Å–µ–Ω–Ω–∏–º —É—Ç—Ä–æ–º –æ–Ω –∑–∞–º–µ—Ç–∏–ª —Å–∞–º—ã–π –±–æ–ª—å—à–æ–π –∏ –±–ª–µ—Å—Ç—è—â–∏–π –∂–µ–ª—É–¥—å, –∫–æ—Ç–æ—Ä—ã–π –∫–æ–≥–¥–∞-–ª–∏–±–æ –≤–∏–¥–µ–ª, –ø—Ä—è–º–æ —á–µ—Ä–µ–∑ –∂—É—Ä—á–∞—â–∏–π —Ä—É—á–µ–π. –û–Ω –∑–Ω–∞–ª, —á—Ç–æ –¥–æ–±—Ä–∞—Ç—å—Å—è –¥–æ –Ω–µ–≥–æ –±—É–¥–µ—Ç –Ω–µ–ø—Ä–æ—Å—Ç–æ, –Ω–æ –°–∫–≤–∏–∫–∏ –±—ã–ª —Ö—Ä–∞–±—Ä–æ–π –±–µ–ª–∫–æ–π. –û–Ω –±—ã—Å—Ç—Ä–æ —Å–ø—É—Å—Ç–∏–ª—Å—è —Å–æ —Å–≤–æ–µ–≥–æ –¥–µ—Ä–µ–≤–∞, —Ç—â–∞—Ç–µ–ª—å–Ω–æ –ø–ª–∞–Ω–∏—Ä—É—è —Å–≤–æ–π –º–∞—Ä—à—Ä—É—Ç. ¬´–≠—Ç–æ –±—É–¥–µ—Ç –º–æ–µ –≤–µ–ª–∏—á–∞–π—à–µ–µ —Å–æ–∫—Ä–æ–≤–∏—â–µ!¬ª - –ø—Ä–æ–±–æ–ª—Ç–∞–ª –æ–Ω.",
                squeakyQuestion: "–í–æ–ø—Ä–æ—Å: –ß—Ç–æ –°–∫–≤–∏–∫–∏ –ª—é–±–∏–ª –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –Ω–∞ —Å–≤–µ—Ç–µ?",
                applesOption: "–Ø–±–ª–æ–∫–∏",
                nutsOption: "–û—Ä–µ—Ö–∏",
                playingOption: "–ò–≥—Ä—ã",
                checkAnswerBtn: "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–≤–µ—Ç",
                readingCorrect: "–í–µ—Ä–Ω–æ! –í—ã –ø–æ–ª—É—á–∏–ª–∏ 10 –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã—Ö –±–∞–ª–ª–æ–≤!",
                readingIncorrect: "–ù–µ–≤–µ—Ä–Ω–æ. –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –ø–æ–ø—ã—Ç–∫–∏!",
                readingNoSelection: "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –æ—Ç–≤–µ—Ç!",

                // Creative Writing
                creativeWritingTitle: "‚úçÔ∏è –¢–≤–æ—Ä—á–µ—Å–∫–æ–µ –ø–∏—Å—å–º–æ",
                creativeWritingPrompt: "–ù–∞–ø–∏—à–∏—Ç–µ –∫–æ—Ä–æ—Ç–∫–∏–π —Ä–∞—Å—Å–∫–∞–∑ (–º–∏–Ω–∏–º—É–º 3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è), –∏—Å–ø–æ–ª—å–∑—É—è —ç—Ç–∏ 5 —Å–ª–æ–≤:",
                finishWritingBtn: "–ó–∞–≤–µ—Ä—à–∏—Ç—å –Ω–∞–ø–∏—Å–∞–Ω–∏–µ",
                writingTooShort: "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–∞–ø–∏—à–∏—Ç–µ –µ—â–µ –Ω–µ–º–Ω–æ–≥–æ, —á—Ç–æ–±—ã –∑–∞–≤–µ—Ä—à–∏—Ç—å —Å–≤–æ–π —Ä–∞—Å—Å–∫–∞–∑!",
                writingSuccess: "–ó–∞–º–µ—á–∞—Ç–µ–ª—å–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è! –í—ã –ø–æ–ª—É—á–∏–ª–∏ 15 —Ç–≤–æ—Ä—á–µ—Å–∫–∏—Ö –±–∞–ª–ª–æ–≤!",
                creativeWritingPlaceholder: "–ù–∞—á–Ω–∏—Ç–µ —Å–≤–æ—é —É–¥–∏–≤–∏—Ç–µ–ª—å–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é –∑–¥–µ—Å—å...",

                // Science Experiment
                scienceExperimentTitle: "üî¨ –ù–∞—É—á–Ω—ã–π —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç",
                scienceExperimentName: "–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç: –í—É–ª–∫–∞–Ω –∏–∑ –ø–∏—â–µ–≤–æ–π —Å–æ–¥—ã –∏ —É–∫—Å—É—Å–∞! üåã",
                scienceExperimentDesc: "–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å –º–∞–ª–µ–Ω—å–∫–∞—è –±—É—Ç—ã–ª–∫–∞. –í—ã –¥–æ–±–∞–≤–ª—è–µ—Ç–µ –≤ –Ω–µ–µ –¥–≤–µ –ª–æ–∂–∫–∏ –ø–∏—â–µ–≤–æ–π —Å–æ–¥—ã. –ó–∞—Ç–µ–º –≤—ã –º–µ–¥–ª–µ–Ω–Ω–æ –Ω–∞–ª–∏–≤–∞–µ—Ç–µ –Ω–µ–º–Ω–æ–≥–æ —É–∫—Å—É—Å–∞. –ö–∞–∫ –≤—ã –¥—É–º–∞–µ—Ç–µ, —á—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç?",
                yourObservation: "–í–∞—à–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ:",
                submitObservationBtn: "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ",
                observationTooShort: "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–∞–ø–∏—à–∏—Ç–µ –Ω–µ–º–Ω–æ–≥–æ –±–æ–ª—å—à–µ –æ —Å–≤–æ–µ–º –Ω–∞–±–ª—é–¥–µ–Ω–∏–∏!",
                observationSuccess: "–û—Ç–ª–∏—á–Ω–æ–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ! –í—ã –ø–æ–ª—É—á–∏–ª–∏ 10 –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã—Ö –±–∞–ª–ª–æ–≤!",
                observationPlaceholder: "–û–ø–∏—à–∏—Ç–µ, —á—Ç–æ, –ø–æ –≤–∞—à–µ–º—É –º–Ω–µ–Ω–∏—é, –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç...",

                // Memory Challenge
                memoryChallengeTitle: "üß† –ò—Å–ø—ã—Ç–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏",
                memoryFactPrompt: "–°–æ–ø–æ—Å—Ç–∞–≤—å—Ç–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π —Ñ–∞–∫—Ç —Å –∏–∑–≤–µ—Å—Ç–Ω–æ–π –ª–∏—á–Ω–æ—Å—Ç—å—é:",
                nextChallengeBtn: "–°–ª–µ–¥—É—é—â–µ–µ –∑–∞–¥–∞–Ω–∏–µ",
                memoryCorrect: "–í–µ—Ä–Ω–æ!",
                memoryIncorrect: "–ù–µ–≤–µ—Ä–Ω–æ, –Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ —É—á–∏—Ç—å—Å—è!",
                memoryAllDone: "–í—ã –≤—ã–ø–æ–ª–Ω–∏–ª–∏ –≤—Å–µ –∑–∞–¥–∞–Ω–∏—è –Ω–∞ –ø–∞–º—è—Ç—å! –í—ã –ø–æ–ª—É—á–∏–ª–∏ 20 –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã—Ö –±–∞–ª–ª–æ–≤!",

                // Time Travel Quiz
                timeTravelQuizTitle: "üó∫Ô∏è –í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –≤–∏–∫—Ç–æ—Ä–∏–Ω–∞",
                nextQuestionBtn: "–°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å",
                finishQuizBtn: "–ó–∞–≤–µ—Ä—à–∏—Ç—å –≤–∏–∫—Ç–æ—Ä–∏–Ω—É",
                quizNoSelection: "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –æ—Ç–≤–µ—Ç!",
                quizCorrect: "–í–µ—Ä–Ω–æ!",
                quizIncorrect: (answer) => `–ù–µ–≤–µ—Ä–Ω–æ. –û—Ç–≤–µ—Ç –±—ã–ª ${answer}.`,
                quizComplete: (score, total) => `–í–∏–∫—Ç–æ—Ä–∏–Ω–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –í—ã –Ω–∞–±—Ä–∞–ª–∏ ${score} –∏–∑ ${total}! –í—ã –∑–∞—Ä–∞–±–æ—Ç–∞–ª–∏ ${score * 5} –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã—Ö –±–∞–ª–ª–æ–≤!`,
                quizQuestionOf: (current, total) => `–í–æ–ø—Ä–æ—Å ${current} –∏–∑ ${total}`,

                // General Messages
                loginSuccess: "–í—Ö–æ–¥ —É—Å–ø–µ—à–µ–Ω! –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –Ω–∞ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è!",
                loginSelectClass: "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Å–≤–æ–π –∫–ª–∞—Å—Å!",
                loginSelectPhoto: "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Å–≤–æ—é —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é!",
                loginEnterPassword: "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ 4 —Ñ—Ä—É–∫—Ç–∞ –¥–ª—è –≤–∞—à–µ–≥–æ –ø–∞—Ä–æ–ª—è!",
                pointsEarned: (points, type) => `–í—ã –∑–∞—Ä–∞–±–æ—Ç–∞–ª–∏ ${points} ${type} –±–∞–ª–ª–æ–≤!`,
                physicalActivityLogged: (points) => `–í—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª–∏ —Ñ–∏–∑–∏—á–µ—Å–∫—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∏ –∑–∞—Ä–∞–±–æ—Ç–∞–ª–∏ ${points} —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö –±–∞–ª–ª–æ–≤!`,
                purchaseSuccess: (itemName) => `–í—ã –∫—É–ø–∏–ª–∏ ${itemName}!`,
                notEnoughPoints: (itemName) => `–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–∞–ª–ª–æ–≤ –¥–ª—è ${itemName}!`,
                startingActivity: (title) => `–ó–∞–ø—É—Å–∫ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏: ${title}`,
                fruitPasswordPlaceholder: "–í–≤–µ–¥–∏—Ç–µ 4 —Ñ—Ä—É–∫—Ç–∞",
            },
            kg: {
                welcomeTitle: "OquWay'–≥–∞ –∫–æ—à –∫–µ–ª–∏“£–∏–∑!",
                chooseClass: "–ö–ª–∞—Å—Å—ã“£—ã–∑–¥—ã —Ç–∞–Ω–¥–∞“£—ã–∑:",
                horseClass: "–ñ—ã–ª–∫—ã –∫–ª–∞—Å—Å—ã",
                falconClass: "–®—É–º–∫–∞—Ä –∫–ª–∞—Å—Å—ã",
                snowLeopardClass: "–ò–ª–±–∏—Ä—Å –∫–ª–∞—Å—Å—ã",
                pickPhoto: "–°“Ø—Ä”©—Ç“Ø“£“Ø–∑–¥“Ø —Ç–∞–Ω–¥–∞“£—ã–∑:",
                selectClassPrompt: "–°—É—Ä–∞–Ω—ã—á, –∂–µ—Ç–∫–∏–ª–∏–∫—Ç“Ø“Ø —Å“Ø—Ä”©—Ç—Ç”©—Ä–¥“Ø –∫”©—Ä“Ø“Ø “Ø—á“Ø–Ω –∞–¥–µ–≥–µ–Ω–¥–µ –∫–ª–∞—Å—Å—ã“£—ã–∑–¥—ã —Ç–∞–Ω–¥–∞“£—ã–∑.",
                enterPassword: "4-–º”©–º”© —ç–º–æ–¥–∑–∏ –ø–∞—Ä–æ–ª—É“£—É–∑–¥—É –∫–∏—Ä–≥–∏–∑–∏“£–∏–∑:",
                loginBtn: "–ö–∏—Ä“Ø“Ø",
                studentDefaultName: "–û–∫—É—É—á—É",

                dashboardTitle: "–ú–µ–Ω–∏–Ω OquWay —Ç–∞–∫—Ç–∞–º",
                intentionPointsTitle: "–ú–µ–Ω–∏–Ω –Ω–∏–µ—Ç —É–ø–∞–π–ª–∞—Ä—ã–º:",
                physicalPoints: "–§–∏–∑–∏–∫–∞–ª—ã–∫",
                cognitivePoints: "–¢–∞–∞–Ω—ã–ø-–±–∏–ª“Ø“Ø—á“Ø–ª“Ø–∫",
                creativePoints: "–ß—ã–≥–∞—Ä–º–∞—á—ã–ª",
                socialPoints: "–°–æ—Ü–∏–∞–ª–¥—ã–∫",
                earnQuickPointsBtn: "–¢–µ–∑ —É–ø–∞–π —Ç–æ–ø—Ç–æ–æ",
                goToActivitiesBtn: "–û–∫—É—É –∏—à-—á–∞—Ä–∞–ª–∞—Ä—ã–Ω–∞ ”©—Ç“Ø“Ø",
                logPhysicalActivityBtn: "–§–∏–∑–∏–∫–∞–ª—ã–∫ –∞–∫—Ç–∏–≤–¥“Ø“Ø–ª“Ø–∫—Ç“Ø –∫–∞—Ç—Ç–æ–æ",
                visitStoreBtn: "–î“Ø–∫”©–Ω–≥”© –±–∞—Ä—É—É",

                storeTitle: "OquWay –Ω–∏–µ—Ç –¥“Ø–∫”©–Ω“Ø",
                buyBtn: "–°–∞—Ç—ã–ø –∞–ª—É—É",
                backToDashboardBtn: "–ë–∞—à–∫—ã –±–µ—Ç–∫–µ –∫–∞–π—Ç—É—É",

                activitiesTitle: "–û–∫—É—É –∏—à-—á–∞—Ä–∞–ª–∞—Ä—ã",
                backToActivitiesBtn: "–ò—à-—á–∞—Ä–∞–ª–∞—Ä–≥–∞ –∫–∞–π—Ç—É—É",
                startActivityBtn: "–ë–∞—à—Ç–æ–æ",

                // Store Items
                notebook: "–î”ô–ø—Ç–µ—Ä",
                soccerBall: "–§—É—Ç–±–æ–ª —Ç–æ–±—É",
                healthySnack: "–ü–∞–π–¥–∞–ª—É—É —Ç–∞–º–∞–∫",
                paintSet: "–ë–æ—ë–∫ —Ç–æ–ø—Ç–æ–º—É",
                boardGame: "“Æ—Å—Ç”©–ª –æ—é–Ω—É",

                // Math Puzzle
                mathPuzzleTitle: "–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞–ª—ã–∫ —Ç–∞–±—ã—à–º–∞–∫!",
                mathPuzzlePrompt: "–ñ–∞—à—ã—Ä—É—É–Ω –∫–æ–¥–¥—É –∞—á—É—É “Ø—á“Ø–Ω “Ø–ª–≥“Ø–Ω“Ø —Ç–æ–ª—É–∫—Ç–∞“£—ã–∑:",
                enterCodePrompt: "3 –æ—Ä—É–Ω–¥—É—É –∫–æ–¥–¥—É –∫–∏—Ä–≥–∏–∑–∏“£–∏–∑:",
                checkCodeBtn: "–ö–æ–¥–¥—É —Ç–µ–∫—à–µ—Ä“Ø“Ø",
                mathCorrect: "–¢—É—É—Ä–∞! –°–∏–∑ 10 –∫–æ–≥–Ω–∏—Ç–∏–≤–¥–∏–∫ —É–ø–∞–π –∞–ª–¥—ã“£—ã–∑!",
                mathIncorrect: "–¢—É—É—Ä–∞ —ç–º–µ—Å. –ö–∞–π—Ä–∞ –∞—Ä–∞–∫–µ—Ç –∫—ã–ª—ã“£—ã–∑!",
                mathCodePlaceholder: "–º–∏—Å. 123",

                // Reading Time
                readingTimeTitle: "üìñ –û–∫—É—É —É–±–∞–∫—Ç—ã—Å—ã",
                squeakyStoryTitle: "–ö–∏—á–∏–Ω–µ–∫–µ–π —Ç–∞–π–≥–∞–Ω–¥—ã–Ω —á–æ“£ –∂–æ—Ä—É–∫—Ç–∞—Ä—ã",
                squeakyStoryContent: "–ë–∏—Ä –∑–∞–º–∞–Ω–¥–∞, –∂–∞–π–ª—É—É —ç–º–µ–Ω –¥–∞—Ä–∞–≥—ã–Ω–¥–∞, –°–∫–≤–∏–∫–∏ –∞—Ç—Ç—É—É –∫–∏—á–∏–Ω–µ–∫–µ–π —Ç–∞–π–≥–∞–Ω –∂–∞—à–∞–≥–∞–Ω. –°–∫–≤–∏–∫–∏ –∂–∞“£–≥–∞–∫—Ç—ã –±–∞–∞—Ä—ã–Ω–∞–Ω –¥–∞ –∂–∞–∫—à—ã –∫”©—Ä—á“Ø! –ë–∏—Ä —Å–∞–ª–∫—ã–Ω –∫“Ø–∑–≥“Ø —Ç–∞“£–¥–∞, –∞–ª —à–∞—Ä–∫—ã—Ä–∞–≥–∞–Ω –∞–≥—ã–Ω —Å—É—É–Ω—É–Ω –∞—Ä–∫—ã ”©–π“Ø–∑“Ø–Ω–¥”©–≥“Ø —ç“£ —á–æ“£, —ç“£ –∂–∞–ª—Ç—ã—Ä–∞–∫ –∂–∞“£–≥–∞–∫—Ç—ã –∫”©—Ä–¥“Ø. –ê–ª –∞–≥–∞ –∂–µ—Ç“Ø“Ø –∫—ã–π—ã–Ω –±–æ–ª–æ—Ä—É–Ω –±–∏–ª–≥–µ–Ω, –±–∏—Ä–æ–∫ –°–∫–≤–∏–∫–∏ —ç—Ä –∂“Ø—Ä”©–∫ —Ç–∞–π–≥–∞–Ω –±–æ–ª—á—É. –ê–ª –¥–∞—Ä–∞–≥—ã–Ω–∞–Ω —ã–ª–¥—ã–π —Ç“Ø—à“Ø–ø, –∂–æ–ª—É–Ω –∫—ã–ª–¥–∞—Ç –ø–ª–∞–Ω–¥–∞—à—Ç—ã—Ä–¥—ã. ¬´–ë—É–ª –º–µ–Ω–∏–Ω —ç“£ —á–æ“£ –∫–µ–Ω—á–∏–º –±–æ–ª–æ—Ç!¬ª - –¥–µ–ø —à—ã–±—ã—Ä–∞–¥—ã –∞–ª.",
                squeakyQuestion: "–°—É—Ä–æ–æ: –°–∫–≤–∏–∫–∏ –±–∞–∞—Ä—ã–Ω–∞–Ω –¥–∞ —ç–º–Ω–µ–Ω–∏ –∂–∞–∫—à—ã –∫”©—Ä—á“Ø?",
                applesOption: "–ê–ª–º–∞",
                nutsOption: "–ñ–∞“£–≥–∞–∫",
                playingOption: "–û–π–Ω–æ–æ",
                checkAnswerBtn: "–ñ–æ–æ–ø—Ç—É —Ç–µ–∫—à–µ—Ä“Ø“Ø",
                readingCorrect: "–¢—É—É—Ä–∞! –°–∏–∑ 10 –∫–æ–≥–Ω–∏—Ç–∏–≤–¥–∏–∫ —É–ø–∞–π –∞–ª–¥—ã“£—ã–∑!",
                readingIncorrect: "–¢—É—É—Ä–∞ —ç–º–µ—Å. –ê—Ä–∞–∫–µ—Ç –∫—ã–ª–∞ –±–µ—Ä–∏“£–∏–∑!",
                readingNoSelection: "–°—É—Ä–∞–Ω—ã—á, –∂–æ–æ–ø—Ç—É —Ç–∞–Ω–¥–∞“£—ã–∑!",

                // Creative Writing
                creativeWritingTitle: "‚úçÔ∏è –ß—ã–≥–∞—Ä–º–∞—á—ã–ª –∂–∞–∑—É—É",
                creativeWritingPrompt: "–ë—É–ª 5 —Å”©–∑–¥“Ø –∫–æ–ª–¥–æ–Ω—É–ø, –∫—ã—Å–∫–∞ –∞“£–≥–µ–º–µ –∂–∞–∑—ã“£—ã–∑ (–∫–µ–º–∏–Ω–¥–µ 3 —Å“Ø–π–ª”©–º):",
                finishWritingBtn: "–ñ–∞–∑—É—É–Ω—É –±“Ø—Ç“Ø—Ä“Ø“Ø",
                writingTooShort: "–°—É—Ä–∞–Ω—ã—á, –∞“£–≥–µ–º–µ“£–∏–∑–¥–∏ —Ç–æ–ª—É–∫—Ç–æ–æ “Ø—á“Ø–Ω –¥–∞–≥—ã –±–∏—Ä –∞–∑ –∂–∞–∑—ã“£—ã–∑!",
                writingSuccess: "–ö–µ—Ä–µ–º–µ—Ç –∞“£–≥–µ–º–µ! –°–∏–∑ 15 —á—ã–≥–∞—Ä–º–∞—á—ã–ª —É–ø–∞–π –∞–ª–¥—ã“£—ã–∑!",
                creativeWritingPlaceholder: "–ö–µ—Ä–µ–º–µ—Ç –∞“£–≥–µ–º–µ“£–∏–∑–¥–∏ –±—É–ª –∂–µ—Ä–¥–µ–Ω –±–∞—à—Ç–∞“£—ã–∑...",

                // Science Experiment
                scienceExperimentTitle: "üî¨ –ò–ª–∏–º —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏",
                scienceExperimentName: "–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç: –ê—à —Å–æ–¥–∞—Å—ã –∂–∞–Ω–∞ —É–∫—Å—É—Å –∂–∞–Ω–∞—Ä —Ç–æ–æ—Å—É! üåã",
                scienceExperimentDesc: "–ö–∏—á–∏–Ω–µ–∫–µ–π –±”©—Ç”©–ª–∫”©“£“Ø–∑ –±–∞—Ä –¥–µ–ø —ç–ª–µ—Å—Ç–µ—Ç–∏“£–∏–∑. –ê–≥–∞ —ç–∫–∏ –∫–∞—à—ã–∫ –∞—à —Å–æ–¥–∞—Å—ã–Ω —Å–∞–ª–∞—Å—ã–∑. –ê–Ω–¥–∞–Ω –∫–∏–π–∏–Ω, –∂–∞–π–ª–∞–ø –±–∏—Ä –∞–∑ —É–∫—Å—É—Å –∫—É—è—Å—ã–∑. –≠–º–Ω–µ –±–æ–ª–æ—Ç –¥–µ–ø –æ–π–ª–æ–π—Å—É–∑?",
                yourObservation: "–°–∏–∑–¥–∏–Ω –±–∞–π–∫–æ–æ“£—É–∑:",
                submitObservationBtn: "–ë–∞–π–∫–æ–æ–Ω—É —Ç–∞–ø—à—ã—Ä—É—É",
                observationTooShort: "–°—É—Ä–∞–Ω—ã—á, –±–∞–π–∫–æ–æ“£—É–∑ –∂”©–Ω“Ø–Ω–¥”© –¥–∞–≥—ã –±–∏—Ä –∞–∑ –∂–∞–∑—ã“£—ã–∑!",
                observationSuccess: "–ú—ã–∫—Ç—ã –±–∞–π–∫–æ–æ! –°–∏–∑ 10 –∫–æ–≥–Ω–∏—Ç–∏–≤–¥–∏–∫ —É–ø–∞–π –∞–ª–¥—ã“£—ã–∑!",
                observationPlaceholder: "–≠–º–Ω–µ –±–æ–ª–æ—Ç –¥–µ–ø –æ–π–ª–æ–π—Å—É–∑, —Å“Ø—Ä”©—Ç—Ç”©–ø –±–µ—Ä–∏“£–∏–∑...",

                // Memory Challenge
                memoryChallengeTitle: "üß† –≠—Å —Ç—É—Ç—É–º —Å—ã–Ω–æ–æ—Å—É",
                memoryFactPrompt: "–¢–∞—Ä—ã—Ö—ã–π —Ñ–∞–∫—Ç—ã–Ω—ã –∞—Ç–∞–∫—Ç—É—É –∞–¥–∞–º–≥–∞ –¥–∞–ª –∫–µ–ª—Ç–∏—Ä–∏“£–∏–∑:",
                nextChallengeBtn: "–ö–∏–π–∏–Ω–∫–∏ —Å—ã–Ω–æ–æ",
                memoryCorrect: "–¢—É—É—Ä–∞!",
                memoryIncorrect: "–¢—É—É—Ä–∞ —ç–º–µ—Å, –±–∏—Ä–æ–∫ “Ø–π—Ä”©–Ω”© –±–µ—Ä–∏“£–∏–∑!",
                memoryAllDone: "–°–∏–∑ –±–∞—Ä–¥—ã–∫ —ç—Å —Ç—É—Ç—É–º —Å—ã–Ω–æ–æ–ª–æ—Ä—É–Ω –∞—è–∫—Ç–∞–¥—ã“£—ã–∑! –°–∏–∑ 20 –∫–æ–≥–Ω–∏—Ç–∏–≤–¥–∏–∫ —É–ø–∞–π –∞–ª–¥—ã“£—ã–∑!",

                // Time Travel Quiz
                timeTravelQuizTitle: "üó∫Ô∏è –£–±–∞–∫—ã—Ç —Å–∞—è–∫–∞—Ç –≤–∏–∫—Ç–æ—Ä–∏–Ω–∞—Å—ã",
                nextQuestionBtn: "–ö–∏–π–∏–Ω–∫–∏ —Å—É—Ä–æ–æ",
                finishQuizBtn: "–í–∏–∫—Ç–æ—Ä–∏–Ω–∞–Ω—ã –±“Ø—Ç“Ø—Ä“Ø“Ø",
                quizNoSelection: "–°—É—Ä–∞–Ω—ã—á, –∂–æ–æ–ø—Ç—É —Ç–∞–Ω–¥–∞“£—ã–∑!",
                quizCorrect: "–¢—É—É—Ä–∞!",
                quizIncorrect: (answer) => `–¢—É—É—Ä–∞ —ç–º–µ—Å. –ñ–æ–æ–ø ${answer} –±–æ–ª–≥–æ–Ω.`,
                quizComplete: (score, total) => `–í–∏–∫—Ç–æ—Ä–∏–Ω–∞ –±“Ø—Ç—Ç“Ø! –°–∏–∑ ${total} –∏—á–∏–Ω–µ–Ω ${score} —É–ø–∞–π –∞–ª–¥—ã“£—ã–∑! –°–∏–∑ ${score * 5} –∫–æ–≥–Ω–∏—Ç–∏–≤–¥–∏–∫ —É–ø–∞–π –∞–ª–¥—ã“£—ã–∑!`,
                quizQuestionOf: (current, total) => `${current} —Å—É—Ä–æ–æ ${total} –∏—á–∏–Ω–µ–Ω`,

                // General Messages
                loginSuccess: "–ö–∏—Ä“Ø“Ø –∏–π–≥–∏–ª–∏–∫—Ç“Ø“Ø! –ë–∞—à–∫—ã —Ç–∞–∫—Ç–∞“£—ã–∑–≥–∞ –∫–æ—à –∫–µ–ª–∏“£–∏–∑!",
                loginSelectClass: "–°—É—Ä–∞–Ω—ã—á, –∫–ª–∞—Å—Å—ã“£—ã–∑–¥—ã —Ç–∞–Ω–¥–∞“£—ã–∑!",
                loginSelectPhoto: "–°—É—Ä–∞–Ω—ã—á, —Å“Ø—Ä”©—Ç“Ø“£“Ø–∑–¥“Ø —Ç–∞–Ω–¥–∞“£—ã–∑!",
                loginEnterPassword: "–°—É—Ä–∞–Ω—ã—á, –ø–∞—Ä–æ–ª—É“£—É–∑ “Ø—á“Ø–Ω 4 –º”©–º”© –∫–∏—Ä–≥–∏–∑–∏“£–∏–∑!",
                pointsEarned: (points, type) => `–°–∏–∑ ${points} ${type} —É–ø–∞–π –∞–ª–¥—ã“£—ã–∑!`,
                physicalActivityLogged: (points) => `–°–∏–∑ —Ñ–∏–∑–∏–∫–∞–ª—ã–∫ –∞–∫—Ç–∏–≤–¥“Ø“Ø–ª“Ø–∫—Ç“Ø –∫–∞—Ç—Ç–∞–¥—ã“£—ã–∑ –∂–∞–Ω–∞ ${points} —Ñ–∏–∑–∏–∫–∞–ª—ã–∫ —É–ø–∞–π –∞–ª–¥—ã“£—ã–∑!`,
                purchaseSuccess: (itemName) => `–°–∏–∑ ${itemName} —Å–∞—Ç—ã–ø –∞–ª–¥—ã“£—ã–∑!`,
                notEnoughPoints: (itemName) => `${itemName} “Ø—á“Ø–Ω —É–ø–∞–π –∂–µ—Ç–∏—à—Å–∏–∑!`,
                startingActivity: (title) => `–ò—à-—á–∞—Ä–∞ –±–∞—à—Ç–∞–ª—É—É–¥–∞: ${title}`,
                fruitPasswordPlaceholder: "4 –º”©–º”© –∫–∏—Ä–≥–∏–∑–∏“£–∏–∑",
            }
        };

        const CLASS_NAMES = {
            "Horse": "Horse",
            "Falcon": "Falcon",
            "Snow Leopard": "Snow Leopard"
        };

        const STUDENT_PHOTOS = [
            "https://placehold.co/100x100/ADD8E6/000000?text=S1",
            "https://placehold.co/100x100/90EE90/000000?text=S2",
            "https://placehold.co/100x100/FFB6C1/000000?text=S3",
            "https://placehold.co/100x100/FFD700/000000?text=S4",
            "https://placehold.co/100x100/DDA0DD/000000?text=S5",
            "https://placehold.co/100x100/F08080/000000?text=S6",
            "https://placehold.co/100x100/B0C4DE/000000?text=S7",
            "https://placehold.co/100x100/DAA520/000000?text=S8",
            "https://placehold.co/100x100/C0C0C0/000000?text=S9"
        ];

        const FRUIT_EMOJIS = ["üçé", "üçâ", "üçå", "üçì", "üçç", "ü•≠", "ü•ù", "üçä", "üçí"];

        const storeItems = [
            { id: 'notebook', name: 'notebook', icon: 'üìö', cost: { cognitive: 5 } },
            { id: 'soccer-ball', name: 'soccerBall', icon: '‚öΩ', cost: { physical: 7, social: 3 } },
            { id: 'healthy-snack', name: 'healthySnack', icon: 'üçè', cost: { physical: 3 } },
            { id: 'paint-set', name: 'paintSet', icon: 'üñåÔ∏è', cost: { creative: 8 } },
            { id: 'board-game', name: 'boardGame', icon: 'üé≤', cost: { social: 6, cognitive: 2 } }
        ];

        const learningActivities = [
            { id: 'math-puzzle', subject: 'Math', icon: 'üî¢', titleKey: 'mathPuzzleTitle', descriptionKey: 'mathPuzzlePrompt' },
            { id: 'reading-time', subject: 'Reading', icon: 'üìñ', titleKey: 'readingTimeTitle', descriptionKey: 'squeakyStoryTitle' },
            { id: 'creative-writing', subject: 'Writing', icon: '‚úçÔ∏è', titleKey: 'creativeWritingTitle', descriptionKey: 'creativeWritingPrompt' },
            { id: 'science-experiment', subject: 'Science', icon: 'üî¨', titleKey: 'scienceExperimentTitle', descriptionKey: 'scienceExperimentName' },
            { id: 'memory-challenge', subject: 'History', icon: 'üß†', titleKey: 'memoryChallengeTitle', descriptionKey: 'memoryFactPrompt' },
            { id: 'time-travel-quiz', subject: 'History', icon: 'üó∫Ô∏è', titleKey: 'timeTravelQuizTitle', descriptionKey: 'timeTravelQuizTitle' } // Description here is just for activity card display
        ];

        // --- Math Puzzle specific data ---
        const CORRECT_MATH_CODE = "40";

        // --- Reading Time specific data ---
        const READING_CORRECT_ANSWER = "nuts";

        // --- Creative Writing specific data ---
        const WORDS_FOR_WRITING = [
            "sparkle", "whisper", "brave", "mystery", "journey",
            "ancient", "future", "silent", "giant", "tiny",
            "magical", "curious", "hidden", "velvet", "echo"
        ];
        const NUM_WORDS_TO_GENERATE = 5;

        // --- Memory Challenge specific data ---
        const MEMORY_CHALLENGE_QUESTIONS = [
            {
                factKey: "factColumbus", // New key for translation
                correctAnswer: "Christopher Columbus",
                options: ["Isaac Newton", "Christopher Columbus", "Leonardo da Vinci", "Marie Curie"]
            },
            {
                factKey: "factShakespeare",
                correctAnswer: "William Shakespeare",
                options: ["William Shakespeare", "Jane Austen", "Charles Dickens", "Mark Twain"]
            },
            {
                factKey: "factNapoleon",
                correctAnswer: "Napoleon Bonaparte",
                options: ["George Washington", "Abraham Lincoln", "Napoleon Bonaparte", "Julius Caesar"]
            },
            {
                factKey: "factMLK",
                correctAnswer: "Martin Luther King Jr.",
                options: ["Rosa Parks", "Nelson Mandela", "Martin Luther King Jr.", "Abraham Lincoln"]
            }
        ];
        let currentMemoryChallengeIndex = 0;

        // --- Time Travel Quiz specific data ---
        const TIME_TRAVEL_QUIZ_QUESTIONS = [
            {
                questionKey: "quizQ1",
                options: ["Romans", "Greeks", "Egyptians", "Vikings"],
                correctAnswer: "Egyptians"
            },
            {
                questionKey: "quizQ2",
                options: ["Wood", "Mud Bricks", "Concrete", "Ice Blocks"],
                correctAnswer: "Concrete"
            },
            {
                questionKey: "quizQ3",
                options: ["World Cup", "Olympics", "Gladiator Fights", "Chariot Races"],
                correctAnswer: "Olympics"
            }
        ];
        let currentQuizQuestionIndex = 0;
        let quizScore = 0;

        // Add translations for new dynamic content
        translations.en.factColumbus = "Discovered America in 1492.";
        translations.en.factShakespeare = "Wrote the play 'Romeo and Juliet'.";
        translations.en.factNapoleon = "Was a great general and emperor of France.";
        translations.en.factMLK = "Fought for civil rights and racial equality in the USA.";

        translations.en.quizQ1 = "Which ancient civilization built the pyramids?";
        translations.en.quizQ2 = "What did ancient Romans use to build strong structures, including the Pantheon?";
        translations.en.quizQ3 = "In ancient Greece, what major sporting event was held every four years?";

        translations.ru.factColumbus = "–û—Ç–∫—Ä—ã–ª –ê–º–µ—Ä–∏–∫—É –≤ 1492 –≥–æ–¥—É.";
        translations.ru.factShakespeare = "–ù–∞–ø–∏—Å–∞–ª –ø—å–µ—Å—É '–†–æ–º–µ–æ –∏ –î–∂—É–ª—å–µ—Ç—Ç–∞'.";
        translations.ru.factNapoleon = "–ë—ã–ª –≤–µ–ª–∏–∫–∏–º –ø–æ–ª–∫–æ–≤–æ–¥—Ü–µ–º –∏ –∏–º–ø–µ—Ä–∞—Ç–æ—Ä–æ–º –§—Ä–∞–Ω—Ü–∏–∏.";
        translations.ru.factMLK = "–ë–æ—Ä–æ–ª—Å—è –∑–∞ –≥—Ä–∞–∂–¥–∞–Ω—Å–∫–∏–µ –ø—Ä–∞–≤–∞ –∏ —Ä–∞—Å–æ–≤–æ–µ —Ä–∞–≤–µ–Ω—Å—Ç–≤–æ –≤ –°–®–ê.";

        translations.ru.quizQ1 = "–ö–∞–∫–∞—è –¥—Ä–µ–≤–Ω—è—è —Ü–∏–≤–∏–ª–∏–∑–∞—Ü–∏—è –ø–æ—Å—Ç—Ä–æ–∏–ª–∞ –ø–∏—Ä–∞–º–∏–¥—ã?";
        translations.ru.quizQ2 = "–ß—Ç–æ –¥—Ä–µ–≤–Ω–∏–µ —Ä–∏–º–ª—è–Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –¥–ª—è —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞ –ø—Ä–æ—á–Ω—ã—Ö —Å–æ–æ—Ä—É–∂–µ–Ω–∏–π, –≤–∫–ª—é—á–∞—è –ü–∞–Ω—Ç–µ–æ–Ω?";
        translations.ru.quizQ3 = "–í –î—Ä–µ–≤–Ω–µ–π –ì—Ä–µ—Ü–∏–∏ –∫–∞–∫–æ–µ –∫—Ä—É–ø–Ω–æ–µ —Å–ø–æ—Ä—Ç–∏–≤–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ –ø—Ä–æ–≤–æ–¥–∏–ª–æ—Å—å –∫–∞–∂–¥—ã–µ —á–µ—Ç—ã—Ä–µ –≥–æ–¥–∞?";

        translations.kg.factColumbus = "1492-–∂—ã–ª—ã –ê–º–µ—Ä–∏–∫–∞–Ω—ã –∞—á–∫–∞–Ω.";
        translations.kg.factShakespeare = "'–†–æ–º–µ–æ –∂–∞–Ω–∞ –î–∂—É–ª—å–µ—Ç—Ç–∞' –ø—å–µ—Å–∞—Å—ã–Ω –∂–∞–∑–≥–∞–Ω.";
        translations.kg.factNapoleon = "–£–ª—É—É –∫–æ–ª –±–∞—à—á—ã –∂–∞–Ω–∞ –§—Ä–∞–Ω—Ü–∏—è–Ω—ã–Ω –∏–º–ø–µ—Ä–∞—Ç–æ—Ä—É –±–æ–ª–≥–æ–Ω.";
        translations.kg.factMLK = "–ê–ö–®–¥–∞ –∂–∞—Ä–∞–Ω–¥—ã–∫ —É–∫—É–∫—Ç–∞—Ä –∂–∞–Ω–∞ —Ä–∞—Å–∞–ª—ã–∫ —Ç–µ“£–¥–∏–∫ “Ø—á“Ø–Ω –∫“Ø—Ä”©—à–∫”©–Ω.";

        translations.kg.quizQ1 = "–ö–∞–π—Å—ã –±–∞–π—ã—Ä–∫—ã —Ü–∏–≤–∏–ª–∏–∑–∞—Ü–∏—è –ø–∏—Ä–∞–º–∏–¥–∞–ª–∞—Ä–¥—ã –∫—É—Ä–≥–∞–Ω?";
        translations.kg.quizQ2 = "–ë–∞–π—ã—Ä–∫—ã —Ä–∏–º–¥–∏–∫—Ç–µ—Ä –∫“Ø—á—Ç“Ø“Ø –∫—É—Ä—É–ª—É—à—Ç–∞—Ä–¥—ã, –∞–Ω—ã–Ω –∏—á–∏–Ω–¥–µ –ü–∞–Ω—Ç–µ–æ–Ω–¥—É –∫—É—Ä—É—É “Ø—á“Ø–Ω —ç–º–Ω–µ–Ω–∏ –∫–æ–ª–¥–æ–Ω—É—à–∫–∞–Ω?";
        translations.kg.quizQ3 = "–ë–∞–π—ã—Ä–∫—ã –ì—Ä–µ—Ü–∏—è–¥–∞ —Ç”©—Ä—Ç –∂—ã–ª–¥–∞ –±–∏—Ä –∫–∞–Ω–¥–∞–π –∏—Ä–∏ —Å–ø–æ—Ä—Ç—Ç—É–∫ –∏—à-—á–∞—Ä–∞ ”©—Ç–∫”©—Ä“Ø–ª–≥”©–Ω?";

        // --- Internationalization (i18n) Functions ---

        /**
         * Translates a given text key based on the current language.
         * @param {string} key - The key for the text in the translations object.
         * @param {...any} args - Arguments to pass to the translation function if it's a function.
         * @returns {string} The translated text.
         */
        function getText(key, ...args) {
            const currentLangTranslations = translations[studentData.currentLang];
            const text = currentLangTranslations[key];
            if (typeof text === 'function') {
                return text(...args);
            }
            return text || key; // Fallback to key if translation not found
        }

        /**
         * Updates all elements with a `data-i18n` attribute based on the current language.
         */
        function updateTextContent() {
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.dataset.i18n;
                // Handle placeholder separately for input fields
                if (element.tagName === 'INPUT' && element.hasAttribute('placeholder')) {
                    element.placeholder = getText(key);
                } else if (element.tagName === 'TEXTAREA' && element.hasAttribute('placeholder')) {
                    element.placeholder = getText(key);
                }
                else {
                    element.textContent = getText(key);
                }
            });
            // Specific updates for dynamic content that isn't handled by data-i18n
            if (studentData.selectedClass) {
                // Ensure 'studentDefaultName' is defined for all languages
                studentData.name = `${getText(CLASS_NAMES[studentData.selectedClass].toLowerCase() + 'Class')} ${getText('studentDefaultName')}`;
            }
            updateDashboardPoints(); // Update points labels on dashboard
            updateStorePoints(); // Update points labels on store
            renderStore(); // Re-render store items
            renderActivities(); // Re-render activity cards
            if (mathPuzzleScreen.classList.contains('active')) renderMathPuzzle(); // Re-render math puzzle content
            if (readingTimeScreen.classList.contains('active')) renderReadingTime(); // Re-render reading time content
            if (creativeWritingScreen.classList.contains('active')) renderCreativeWriting(); // Re-render creative writing
            if (scienceExperimentScreen.classList.contains('active')) renderScienceExperiment(); // Re-render science experiment
            if (memoryChallengeScreen.classList.contains('active')) loadMemoryQuestion(currentMemoryChallengeIndex); // Re-render memory challenge
            if (timeTravelQuizScreen.classList.contains('active')) loadQuizQuestion(currentQuizQuestionIndex); // Re-render quiz
        }

        /**
         * Sets the application language and updates the UI.
         * @param {string} langCode - The language code (e.g., 'en', 'ru', 'kg').
         */
        function setLanguage(langCode) {
            if (translations[langCode]) {
                studentData.currentLang = langCode;
                // Update selected flag visual
                document.querySelectorAll('.language-switcher img').forEach(flag => {
                    flag.classList.remove('selected');
                    if (flag.dataset.lang === langCode) {
                        flag.classList.add('selected');
                    }
                });
                updateTextContent();
            } else {
                console.warn(`Language '${langCode}' not supported.`);
            }
        }

        // --- Utility Functions ---

        /**
         * Displays a temporary message to the user.
         * @param {string} key - The key for the message in the translations object.
         * @param {number} duration - Duration in milliseconds for the message to be visible.
         * @param {...any} args - Arguments to pass to the translation function if it's a function.
         */
        function showMessage(key, duration = 3000, ...args) {
            messageBox.textContent = getText(key, ...args);
            messageBox.classList.add('active');
            setTimeout(() => {
                messageBox.classList.remove('active');
            }, duration);
        }

        /**
         * Switches the active screen.
         * @param {HTMLElement} screenToShow - The screen element to make active.
         */
        function showScreen(screenToShow) {
            [loginScreen, dashboardScreen, storeScreen, activityScreen, mathPuzzleScreen,
             readingTimeScreen, creativeWritingScreen, scienceExperimentScreen,
             memoryChallengeScreen, timeTravelQuizScreen].forEach(screen => {
                screen.classList.remove('active');
            });
            screenToShow.classList.add('active');
            updateTextContent(); // Update text content when screen changes
        }

        /**
         * Updates the displayed point balances on the dashboard.
         */
        function updateDashboardPoints() {
            physicalPointsDisplay.textContent = studentData.points.physical;
            cognitivePointsDisplay.textContent = studentData.points.cognitive;
            creativePointsDisplay.textContent = studentData.points.creative;
            socialPointsDisplay.textContent = studentData.points.social;
            // Update labels with current language
            document.querySelector('.point-physical .label').textContent = getText('physicalPoints');
            document.querySelector('.point-cognitive .label').textContent = getText('cognitivePoints');
            document.querySelector('.point-creative .label').textContent = getText('creativePoints');
            document.querySelector('.point-social .label').textContent = getText('socialPoints');
        }

        /**
         * Updates the displayed point balances on the store screen.
         */
        function updateStorePoints() {
            storePhysicalPointsDisplay.textContent = studentData.points.physical;
            storeCognitivePointsDisplay.textContent = studentData.points.cognitive;
            storeCreativePointsDisplay.textContent = studentData.points.creative;
            storeSocialPointsDisplay.textContent = studentData.points.social;
        }

        /**
         * Checks if the student has enough points to buy an item.
         * @param {object} itemCost - An object containing the cost for each point type.
         * @returns {boolean} True if student has enough points, false otherwise.
         */
        function canAfford(itemCost) {
            for (const type in itemCost) {
                if (studentData.points[type] < itemCost[type]) {
                    return false;
                }
            }
            return true;
        }

        /**
         * Deducts points from studentData based on item cost.
         * @param {object} itemCost - An object containing the cost for each point type.
         */
        function deductPoints(itemCost) {
            for (const type in itemCost) {
                studentData.points[type] -= itemCost[type];
            }
        }

        // --- Login Screen Logic ---

        /**
         * Populates the student photo selection based on class.
         */
        function populateStudentPhotos() {
            studentPhotoSelection.innerHTML = ''; // Clear previous photos
            STUDENT_PHOTOS.forEach(photoUrl => {
                const photoItem = document.createElement('div');
                photoItem.className = 'student-photo-item';
                photoItem.dataset.photoUrl = photoUrl;
                photoItem.innerHTML = `<img src="${photoUrl}" alt="Student Photo" onerror="this.onerror=null;this.src='https://placehold.co/100x100/CCCCCC/000000?text=Error';">`; // Added onerror fallback
                photoItem.addEventListener('click', handleStudentPhotoSelection);
                studentPhotoSelection.appendChild(photoItem);
            });
            // Automatically select the first photo if none is selected
            if (!studentData.avatar && STUDENT_PHOTOS.length > 0) {
                studentData.avatar = STUDENT_PHOTOS[0];
                const firstPhotoItem = studentPhotoSelection.querySelector('.student-photo-item');
                if (firstPhotoItem) {
                    firstPhotoItem.classList.add('selected');
                }
            }
        }

        /**
         * Handles the selection of a class.
         * @param {Event} event - The click event.
         */
        function handleClassSelection(event) {
            const selectedItem = event.target.closest('.class-item');
            if (selectedItem) {
                document.querySelectorAll('.class-item').forEach(item => {
                    item.classList.remove('selected');
                });
                selectedItem.classList.add('selected');
                studentData.selectedClass = selectedItem.dataset.class;
                studentData.name = `${getText(studentData.selectedClass.toLowerCase() + 'Class')} ${getText('studentDefaultName')}`; // Update student name with translation
                populateStudentPhotos(); // Show photos after class is selected
            }
        }

        /**
         * Handles the selection of a student photo.
         * @param {Event} event - The click event.
         */
        function handleStudentPhotoSelection(event) {
            const selectedItem = event.target.closest('.student-photo-item');
            if (selectedItem) {
                document.querySelectorAll('.student-photo-item').forEach(item => {
                    item.classList.remove('selected');
                });
                selectedItem.classList.add('selected');
                studentData.avatar = selectedItem.dataset.photoUrl;
            }
        }

        /**
         * Renders the 3x3 fruit grid.
         */
        function renderFruitGrid() {
            fruitGrid.innerHTML = ''; // Clear previous buttons
            FRUIT_EMOJIS.forEach(fruit => {
                const fruitButton = document.createElement('button');
                fruitButton.className = 'fruit-button';
                fruitButton.textContent = fruit;
                fruitButton.addEventListener('click', () => {
                    if (emojiPasswordInput.value.length < 4) {
                        emojiPasswordInput.value += fruit;
                    }
                });
                fruitGrid.appendChild(fruitButton);
            });
            // Set the placeholder for the fruit password input
            emojiPasswordInput.placeholder = getText('fruitPasswordPlaceholder');
        }

        /**
         * Handles the login attempt.
         */
        function handleLogin() {
            if (!studentData.selectedClass) {
                showMessage("loginSelectClass");
                return;
            }
            if (!studentData.avatar) {
                showMessage("loginSelectPhoto");
                return;
            }
            if (emojiPasswordInput.value.length < 4) {
                showMessage("loginEnterPassword");
                return;
            }

            // Successful login (password validation skipped as per request)
            showMessage("loginSuccess", 2000);
            renderDashboard();
            showScreen(dashboardScreen);
        }

        // --- Dashboard Screen Logic ---

        /**
         * Renders the dashboard with current student data.
         */
        function renderDashboard() {
            dashboardAvatar.src = studentData.avatar;
            dashboardAvatar.alt = `${studentData.name}'s Avatar`;
            studentNameDisplay.textContent = studentData.name;
            updateDashboardPoints();
        }

        /**
         * Simulates earning random points (retains original "Start Activity" functionality).
         */
        function earnQuickPoints() {
            const pointTypes = ['physical', 'cognitive', 'creative', 'social'];
            const randomType = pointTypes[Math.floor(Math.random() * pointTypes.length)];
            const earnedPoints = Math.floor(Math.random() * 5) + 1; // Earn 1-5 points

            studentData.points[randomType] += earnedPoints;
            showMessage("pointsEarned", 2000, earnedPoints, getText(randomType + 'Points').toLowerCase());
            updateDashboardPoints();
        }

        /**
         * Simulates logging physical activity, earning physical points.
         */
        function logPhysicalActivity() {
            const earnedPoints = Math.floor(Math.random() * 3) + 1; // Earn 1-3 physical points
            studentData.points.physical += earnedPoints;
            showMessage("physicalActivityLogged", 2000, earnedPoints);
            updateDashboardPoints();
        }

        // --- Store Screen Logic ---

        /**
         * Renders the store items and updates store point display.
         */
        function renderStore() {
            storeAvatar.src = studentData.avatar;
            storeAvatar.alt = `${studentData.name}'s Avatar`;
            storeStudentName.textContent = studentData.name;
            updateStorePoints();

            storeItemsContainer.innerHTML = ''; // Clear previous items

            storeItems.forEach(item => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'store-item';
                itemDiv.innerHTML = `
                    <span class="item-icon">${item.icon}</span>
                    <span class="item-name">${getText(item.name)}</span>
                    <div class="item-cost">
                        ${Object.keys(item.cost).map(type => {
                            let icon, colorClass;
                            switch (type) {
                                case 'physical': icon = 'üí™'; colorClass = 'point-physical'; break;
                                case 'cognitive': icon = 'üß†'; colorClass = 'point-cognitive'; break;
                                case 'creative': icon = 'üé®'; colorClass = 'point-creative'; break;
                                case 'social': icon = 'ü§ù'; colorClass = 'point-social'; break;
                                default: icon = ''; colorClass = '';
                            }
                            return `<div class="cost-point ${colorClass}"><span class="icon">${icon}</span> ${item.cost[type]}</div>`;
                        }).join('')}
                    </div>
                    <button class="buy-btn" data-item-id="${item.id}">${getText('buyBtn')}</button>
                `;

                const buyButton = itemDiv.querySelector('.buy-btn');
                buyButton.disabled = !canAfford(item.cost); // Disable if not affordable

                buyButton.addEventListener('click', () => handlePurchase(item));
                storeItemsContainer.appendChild(itemDiv);
            });
        }

        /**
         * Handles the purchase of an item from the store.
         * @param {object} item - The item object being purchased.
         */
        function handlePurchase(item) {
            if (canAfford(item.cost)) {
                deductPoints(item.cost);
                showMessage("purchaseSuccess", 2000, getText(item.name));
                updateStorePoints();
                renderStore(); // Re-render store to update button states
            } else {
                showMessage("notEnoughPoints", 2000, getText(item.name));
            }
        }

        // --- Activity Screen Logic ---

        /**
         * Renders the list of learning activities.
         */
        function renderActivities() {
            activityItemsContainer.innerHTML = ''; // Clear previous activities

            learningActivities.forEach(activity => {
                const activityCard = document.createElement('div');
                activityCard.className = 'activity-card';
                activityCard.innerHTML = `
                    <span class="subject-icon">${activity.icon}</span>
                    <span class="activity-title">${getText(activity.titleKey)}</span>
                    <p class="activity-description">${getText(activity.descriptionKey)}</p>
                    <button class="start-activity-btn" data-activity-id="${activity.id}">${getText('startActivityBtn')}</button>
                `;

                const startButton = activityCard.querySelector('.start-activity-btn');
                startButton.addEventListener('click', () => handleStartActivityFromList(activity)); // Pass entire activity object
                activityItemsContainer.appendChild(activityCard);
            });
        }

        /**
         * Handles the start of an activity from the learning activities list.
         * @param {object} activity - The activity object being started.
         */
        function handleStartActivityFromList(activity) {
            switch (activity.id) {
                case 'math-puzzle':
                    renderMathPuzzle();
                    showScreen(mathPuzzleScreen);
                    break;
                case 'reading-time':
                    renderReadingTime();
                    showScreen(readingTimeScreen);
                    break;
                case 'creative-writing':
                    renderCreativeWriting();
                    showScreen(creativeWritingScreen);
                    break;
                case 'science-experiment':
                    renderScienceExperiment();
                    showScreen(scienceExperimentScreen);
                    break;
                case 'memory-challenge':
                    renderMemoryChallenge();
                    showScreen(memoryChallengeScreen);
                    break;
                case 'time-travel-quiz':
                    renderTimeTravelQuiz();
                    showScreen(timeTravelQuizScreen);
                    break;
                default:
                    console.log(getText('startingActivity', getText(activity.titleKey)));
                    showMessage("startingActivity", 1500, getText(activity.titleKey));
                    break;
            }
        }

        // --- Math Puzzle Screen Logic ---
        /**
         * Renders the Math Puzzle screen.
         */
        function renderMathPuzzle() {
            mathCodeInput.value = ''; // Clear previous input
            document.querySelector('#mathPuzzleScreen h1').textContent = getText('mathPuzzleTitle');
            document.querySelector('#mathPuzzleScreen p[data-i18n="mathPuzzlePrompt"]').textContent = getText('mathPuzzlePrompt');
            document.querySelector('#mathPuzzleScreen label[data-i18n="enterCodePrompt"]').textContent = getText('enterCodePrompt');
            document.getElementById('checkMathCodeBtn').textContent = getText('checkCodeBtn');
            document.getElementById('backFromMathPuzzleBtn').textContent = getText('backToActivitiesBtn');
            mathCodeInput.placeholder = getText('mathCodePlaceholder');
        }

        /**
         * Checks the entered math puzzle code.
         */
        function checkMathCode() {
            const enteredCode = mathCodeInput.value;
            if (enteredCode === CORRECT_MATH_CODE) {
                showMessage("mathCorrect", 2000);
                studentData.points.cognitive += 10;
                updateDashboardPoints();
            } else {
                showMessage("mathIncorrect", 2000);
            }
        }

        // --- Reading Time Screen Logic ---
        /**
         * Renders the Reading Time screen.
         */
        function renderReadingTime() {
            document.querySelector('#readingTimeScreen h1').textContent = getText('readingTimeTitle');
            document.querySelector('#readingTimeScreen p[data-i18n="squeakyStoryTitle"]').textContent = getText('squeakyStoryTitle');
            document.querySelector('#readingTimeScreen p[data-i18n="squeakyStoryContent"]').textContent = getText('squeakyStoryContent');
            document.querySelector('#readingTimeScreen p[data-i18n="squeakyQuestion"]').textContent = getText('squeakyQuestion');
            document.querySelector('#readingOptions label:nth-child(1) span').textContent = getText('applesOption');
            document.querySelector('#readingOptions label:nth-child(2) span').textContent = getText('nutsOption');
            document.querySelector('#readingOptions label:nth-child(3) span').textContent = getText('playingOption');
            document.getElementById('checkReadingAnswerBtn').textContent = getText('checkAnswerBtn');
            document.getElementById('backFromReadingTimeBtn').textContent = getText('backToActivitiesBtn');

            document.querySelectorAll('input[name="readingAnswer"]').forEach(radio => {
                radio.checked = false;
                radio.closest('.reading-option').classList.remove('selected');
            });
            checkReadingAnswerBtn.disabled = false;
        }

        /**
         * Handles selection of a reading answer option.
         */
        readingOptions.addEventListener('change', (event) => {
            document.querySelectorAll('.reading-option').forEach(label => {
                label.classList.remove('selected');
            });
            if (event.target.checked) {
                event.target.closest('.reading-option').classList.add('selected');
            }
        });

        /**
         * Checks the selected reading comprehension answer.
         */
        function checkReadingAnswer() {
            const selectedAnswer = document.querySelector('input[name="readingAnswer"]:checked');
            if (!selectedAnswer) {
                showMessage("readingNoSelection", 2000);
                return;
            }

            if (selectedAnswer.value === READING_CORRECT_ANSWER) {
                showMessage("readingCorrect", 2000);
                studentData.points.cognitive += 10;
                updateDashboardPoints();
                checkReadingAnswerBtn.disabled = true;
            } else {
                showMessage("readingIncorrect", 2000);
            }
        }

        // --- Creative Writing Screen Logic ---
        /**
         * Renders the Creative Writing screen.
         */
        function renderCreativeWriting() {
            creativeWritingTextarea.value = ''; // Clear previous writing
            const shuffledWords = WORDS_FOR_WRITING.sort(() => 0.5 - Math.random());
            const selectedWords = shuffledWords.slice(0, NUM_WORDS_TO_GENERATE);
            randomWordsDisplay.textContent = selectedWords.join(', ');
            finishWritingBtn.disabled = false; // Enable button

            document.querySelector('#creativeWritingScreen h1').textContent = getText('creativeWritingTitle');
            document.querySelector('#creativeWritingScreen p[data-i18n="creativeWritingPrompt"]').textContent = getText('creativeWritingPrompt');
            creativeWritingTextarea.placeholder = getText('creativeWritingPlaceholder');
            document.getElementById('finishWritingBtn').textContent = getText('finishWritingBtn');
            document.getElementById('backFromCreativeWritingBtn').textContent = getText('backToActivitiesBtn');
        }

        /**
         * Handles finishing the creative writing activity.
         */
        function finishWriting() {
            const story = creativeWritingTextarea.value.trim();
            if (story.split(/\s+/).filter(word => word.length > 0).length < 10) {
                showMessage("writingTooShort", 2000);
                return;
            }
            console.log("Student's Story:\n", story);
            showMessage("writingSuccess", 2000);
            studentData.points.creative += 15;
            updateDashboardPoints();
            finishWritingBtn.disabled = true;
        }

        // --- Science Experiment Screen Logic ---
        /**
         * Renders the Science Experiment screen.
         */
        function renderScienceExperiment() {
            observationTextarea.value = ''; // Clear previous observation
            submitObservationBtn.disabled = false; // Enable button

            document.querySelector('#scienceExperimentScreen h1').textContent = getText('scienceExperimentTitle');
            document.querySelector('#scienceExperimentScreen p[data-i18n="scienceExperimentName"]').textContent = getText('scienceExperimentName');
            document.querySelector('#scienceExperimentScreen p[data-i18n="scienceExperimentDesc"]').textContent = getText('scienceExperimentDesc');
            document.querySelector('#scienceExperimentScreen label[data-i18n="yourObservation"]').textContent = getText('yourObservation');
            observationTextarea.placeholder = getText('observationPlaceholder');
            document.getElementById('submitObservationBtn').textContent = getText('submitObservationBtn');
            document.getElementById('backFromScienceExperimentBtn').textContent = getText('backToActivitiesBtn');
        }

        /**
         * Handles submitting the observation for the science experiment.
         */
        function submitObservation() {
            const observation = observationTextarea.value.trim();
            if (observation.length < 20) {
                showMessage("observationTooShort", 2000);
                return;
            }
            console.log("Student's Observation:\n", observation);
            showMessage("observationSuccess", 2000);
            studentData.points.cognitive += 10;
            updateDashboardPoints();
            submitObservationBtn.disabled = true;
        }

        // --- Memory Challenge Screen Logic ---
        /**
         * Renders the Memory Challenge screen and loads the first question.
         */
        function renderMemoryChallenge() {
            currentMemoryChallengeIndex = 0; // Reset for a fresh start
            loadMemoryQuestion(currentMemoryChallengeIndex);

            document.querySelector('#memoryChallengeScreen h1').textContent = getText('memoryChallengeTitle');
            document.querySelector('#memoryChallengeScreen p[data-i18n="memoryFactPrompt"]').textContent = getText('memoryFactPrompt');
            document.getElementById('nextMemoryChallengeBtn').textContent = getText('nextChallengeBtn');
            document.getElementById('backFromMemoryChallengeBtn').textContent = getText('backToActivitiesBtn');
        }

        /**
         * Loads a specific memory challenge question.
         * @param {number} index - The index of the question to load.
         */
        function loadMemoryQuestion(index) {
            const question = MEMORY_CHALLENGE_QUESTIONS[index];
            if (!question) {
                showMessage("memoryAllDone", 3000);
                studentData.points.cognitive += 20;
                updateDashboardPoints();
                showScreen(activityScreen);
                return;
            }

            memoryFactDisplay.textContent = getText(question.factKey); // Get translated fact
            memoryOptionsContainer.innerHTML = ''; // Clear previous options

            const shuffledOptions = question.options.sort(() => 0.5 - Math.random());

            shuffledOptions.forEach(option => {
                const btn = document.createElement('button');
                btn.className = 'memory-option-btn';
                btn.textContent = option;
                btn.dataset.answer = option;
                btn.addEventListener('click', handleMemoryAnswer);
                memoryOptionsContainer.appendChild(btn);
            });
            nextMemoryChallengeBtn.style.display = 'none';
        }

        /**
         * Handles clicking an answer in the memory challenge.
         * @param {Event} event - The click event.
         */
        function handleMemoryAnswer(event) {
            const selectedBtn = event.target;
            const correctAnswer = MEMORY_CHALLENGE_QUESTIONS[currentMemoryChallengeIndex].correctAnswer;
            
            document.querySelectorAll('.memory-option-btn').forEach(btn => {
                btn.disabled = true;
                if (btn.dataset.answer === correctAnswer) {
                    btn.classList.add('correct');
                } else if (btn === selectedBtn) {
                    btn.classList.add('incorrect');
                }
            });

            if (selectedBtn.dataset.answer === correctAnswer) {
                showMessage("memoryCorrect", 2000);
                studentData.points.cognitive += 5;
                updateDashboardPoints();
            } else {
                showMessage("memoryIncorrect", 2000);
            }
            nextMemoryChallengeBtn.style.display = 'block';
        }

        /**
         * Loads the next memory challenge question.
         */
        function nextMemoryChallenge() {
            currentMemoryChallengeIndex++;
            loadMemoryQuestion(currentMemoryChallengeIndex);
        }

        // --- Time Travel Quiz Screen Logic ---
        /**
         * Renders the Time Travel Quiz screen and loads the first question.
         */
        function renderTimeTravelQuiz() {
            currentQuizQuestionIndex = 0;
            quizScore = 0;
            loadQuizQuestion(currentQuizQuestionIndex);
            nextQuizQuestionBtn.style.display = 'block';
            finishQuizBtn.style.display = 'none';

            document.querySelector('#timeTravelQuizScreen h1').textContent = getText('timeTravelQuizTitle');
            document.getElementById('nextQuizQuestionBtn').textContent = getText('nextQuestionBtn');
            document.getElementById('finishQuizBtn').textContent = getText('finishQuizBtn');
            document.getElementById('backFromTimeTravelQuizBtn').textContent = getText('backToActivitiesBtn');
        }

        /**
         * Loads a specific quiz question.
         * @param {number} index - The index of the question to load.
         */
        function loadQuizQuestion(index) {
            const question = TIME_TRAVEL_QUIZ_QUESTIONS[index];
            if (!question) {
                showMessage("quizComplete", 3000, quizScore, TIME_TRAVEL_QUIZ_QUESTIONS.length);
                studentData.points.cognitive += quizScore * 5;
                updateDashboardPoints();
                showScreen(activityScreen);
                return;
            }

            quizQuestionNumber.textContent = getText('quizQuestionOf', index + 1, TIME_TRAVEL_QUIZ_QUESTIONS.length);
            quizQuestionText.textContent = getText(question.questionKey); // Get translated question
            quizOptionsContainer.innerHTML = '';

            const shuffledOptions = question.options.sort(() => 0.5 - Math.random());

            shuffledOptions.forEach(option => {
                const label = document.createElement('label');
                label.className = 'quiz-option';
                label.innerHTML = `
                    <input type="radio" name="quizAnswer" value="${option}"> <span class="option-text">${option}</span>
                `;
                label.addEventListener('click', () => {
                    document.querySelectorAll('.quiz-option').forEach(optLabel => optLabel.classList.remove('selected'));
                    label.classList.add('selected');
                });
                quizOptionsContainer.appendChild(label);
            });

            document.querySelectorAll('input[name="quizAnswer"]').forEach(radio => radio.disabled = false);
            nextQuizQuestionBtn.disabled = false;
        }

        /**
         * Checks the selected quiz answer.
         */
        function checkQuizAnswer() {
            const selectedAnswerInput = document.querySelector('input[name="quizAnswer"]:checked');
            if (!selectedAnswerInput) {
                showMessage("quizNoSelection", 2000);
                return;
            }

            const selectedAnswer = selectedAnswerInput.value;
            const correctAnswer = TIME_TRAVEL_QUIZ_QUESTIONS[currentQuizQuestionIndex].correctAnswer;

            document.querySelectorAll('input[name="quizAnswer"]').forEach(radio => {
                radio.disabled = true;
                const label = radio.closest('.quiz-option');
                if (radio.value === correctAnswer) {
                    label.classList.add('correct');
                } else if (radio.checked) {
                    label.classList.add('incorrect');
                }
            });
            nextQuizQuestionBtn.disabled = true;

            if (selectedAnswer === correctAnswer) {
                showMessage("quizCorrect", 1500);
                quizScore++;
            } else {
                showMessage("quizIncorrect", 1500, correctAnswer);
            }

            setTimeout(() => {
                nextQuizQuestion();
            }, 1500);
        }

        /**
         * Moves to the next quiz question or finishes the quiz.
         */
        function nextQuizQuestion() {
            currentQuizQuestionIndex++;
            if (currentQuizQuestionIndex < TIME_TRAVEL_QUIZ_QUESTIONS.length) {
                loadQuizQuestion(currentQuizQuestionIndex);
                if (currentQuizQuestionIndex === TIME_TRAVEL_QUIZ_QUESTIONS.length - 1) {
                    nextQuizQuestionBtn.style.display = 'none';
                    finishQuizBtn.style.display = 'block';
                }
            } else {
                loadQuizQuestion(currentQuizQuestionIndex);
            }
        }


        // --- Event Listeners ---

        languageSwitcher.addEventListener('click', (event) => {
            const targetFlag = event.target.closest('img');
            if (targetFlag && targetFlag.dataset.lang) {
                setLanguage(targetFlag.dataset.lang);
            }
        });

        // Login Screen
        classSelection.addEventListener('click', handleClassSelection);
        loginBtn.addEventListener('click', handleLogin);

        // Dashboard Screen
        earnQuickPointsBtn.addEventListener('click', earnQuickPoints);
        goToActivitiesBtn.addEventListener('click', () => {
            renderActivities();
            showScreen(activityScreen);
        });
        logPhysicalActivityBtn.addEventListener('click', logPhysicalActivity);
        visitStoreBtn.addEventListener('click', () => {
            renderStore();
            showScreen(storeScreen);
        });

        // Store Screen
        backToDashboardBtn.addEventListener('click', () => {
            updateDashboardPoints();
            showScreen(dashboardScreen);
        });

        // Activity Screen
        backFromActivitiesBtn.addEventListener('click', () => {
            showScreen(dashboardScreen);
        });

        // Math Puzzle Screen
        checkMathCodeBtn.addEventListener('click', checkMathCode);
        backFromMathPuzzleBtn.addEventListener('click', () => {
            renderActivities();
            showScreen(activityScreen);
        });
        mathCodeInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                checkMathCode();
            }
        });

        // Reading Time Screen
        checkReadingAnswerBtn.addEventListener('click', checkReadingAnswer);
        backFromReadingTimeBtn.addEventListener('click', () => {
            renderActivities();
            showScreen(activityScreen);
        });

        // Creative Writing Screen
        finishWritingBtn.addEventListener('click', finishWriting);
        backFromCreativeWritingBtn.addEventListener('click', () => {
            renderActivities();
            showScreen(activityScreen);
        });

        // Science Experiment Screen
        submitObservationBtn.addEventListener('click', submitObservation);
        backFromScienceExperimentBtn.addEventListener('click', () => {
            renderActivities();
            showScreen(activityScreen);
        });

        // Memory Challenge Screen
        nextMemoryChallengeBtn.addEventListener('click', nextMemoryChallenge);
        backFromMemoryChallengeBtn.addEventListener('click', () => {
            renderActivities();
            showScreen(activityScreen);
        });

        // Time Travel Quiz Screen
        nextQuizQuestionBtn.addEventListener('click', checkQuizAnswer);
        finishQuizBtn.addEventListener('click', checkQuizAnswer);
        backFromTimeTravelQuizBtn.addEventListener('click', () => {
            renderActivities();
            showScreen(activityScreen);
        });


        // --- Initial Load ---
        document.addEventListener('DOMContentLoaded', () => {
            setLanguage(studentData.currentLang); // Set initial language and highlight first flag
            showScreen(loginScreen);
            renderFruitGrid();
        });

    </script>
</body>
</html>
